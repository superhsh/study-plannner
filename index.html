<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>ë³€ë¦¬ì‚¬ 2ì°¨ í•™ìŠµ í”Œë˜ë„ˆ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--bg:#0b0d11;--bg2:#12151c;--bg3:#1a1e2a;--bg4:#222738;--bdr:#2a3045;
--t1:#eaedf5;--t2:#9298b0;--t3:#5c6280;
--acc:#7c6cf0;--acc2:#a599ff;--accg:rgba(124,108,240,.25);
--grn:#2dd4a8;--grn2:rgba(45,212,168,.12);
--ylw:#f0c040;--ylw2:rgba(240,192,64,.12);
--red:#ef6b5a;--red2:rgba(239,107,90,.12);
--blu:#5ea8f0;--blu2:rgba(94,168,240,.12);
--pnk:#e879a8;--pnk2:rgba(232,121,168,.12);
--cyn:#40d8d0;--cyn2:rgba(64,216,208,.12);
--patent:#7c6cf0;--control:#40d8d0;--exam:#ef6b5a;--review:#f0c040;
--rest:#2dd4a8;--exercise:#ff7e7e;--output:#e879a8;
--r:10px;--rs:6px;
}
html{font-size:14px}
body{font-family:'Noto Sans KR',sans-serif;background:var(--bg);color:var(--t1);min-height:100vh;min-height:100dvh;overflow-x:hidden;-webkit-tap-highlight-color:transparent}
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:var(--bg2)}::-webkit-scrollbar-thumb{background:var(--bdr);border-radius:3px}
input,select,textarea,button{font-family:inherit}

.app{max-width:520px;margin:0 auto;min-height:100vh;min-height:100dvh;display:flex;flex-direction:column}
@media(min-width:1024px){.app{max-width:480px}}

.hdr{background:var(--bg2);border-bottom:1px solid var(--bdr);padding:12px 16px;position:sticky;top:0;z-index:100;backdrop-filter:blur(16px)}
.hdr-top{display:flex;align-items:center;justify-content:space-between}
.logo{display:flex;align-items:center;gap:8px}
.logo-i{width:32px;height:32px;border-radius:8px;background:linear-gradient(135deg,var(--acc),#a599ff);display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:900;color:#fff;box-shadow:0 2px 10px var(--accg)}
.logo h1{font-size:14px;font-weight:700;letter-spacing:-.3px;line-height:1.2}
.logo small{font-size:9px;color:var(--t3);font-weight:400}
.hdr-r{display:flex;align-items:center;gap:6px}
.dday-badge{font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:600;color:var(--ylw);background:var(--ylw2);padding:3px 8px;border-radius:12px}
.bell{position:relative;padding:4px;cursor:pointer;font-size:16px}
.bell-n{position:absolute;top:0;right:0;background:var(--red);color:#fff;font-size:8px;width:14px;height:14px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700}

.tabs{display:flex;overflow-x:auto;background:var(--bg2);border-bottom:1px solid var(--bdr);padding:0 8px;-webkit-overflow-scrolling:touch;scrollbar-width:none}
.tabs::-webkit-scrollbar{display:none}
.tab{padding:8px 12px;font-size:11px;font-weight:500;color:var(--t3);background:none;border:none;cursor:pointer;white-space:nowrap;border-bottom:2px solid transparent;transition:.15s;display:flex;align-items:center;gap:4px}
.tab:hover{color:var(--t2)}.tab.on{color:var(--acc2);border-bottom-color:var(--acc);font-weight:600}

.content{flex:1;padding:12px 16px 90px;overflow-y:auto}

.c{background:var(--bg3);border:1px solid var(--bdr);border-radius:var(--r);padding:14px;margin-bottom:10px;transition:.15s}
.c:hover{border-color:rgba(124,108,240,.2)}
.ct{font-size:13px;font-weight:600;margin-bottom:10px;display:flex;align-items:center;gap:6px}

.pb{height:5px;background:var(--bg);border-radius:3px;overflow:hidden}.pf{height:100%;border-radius:3px;transition:width .4s}

.b{padding:7px 14px;border-radius:var(--rs);border:none;font-size:12px;font-weight:500;cursor:pointer;transition:.15s;display:inline-flex;align-items:center;gap:5px;font-family:inherit}
.bp{background:var(--acc);color:#fff}.bp:hover{background:#6b5ad9;box-shadow:0 2px 10px var(--accg)}
.bs{background:var(--bg4);color:var(--t1);border:1px solid var(--bdr)}.bs:hover{background:var(--bdr)}
.bsm{padding:4px 8px;font-size:10px}
.bdg{background:var(--red2);color:var(--red)}
.bsuc{background:var(--grn2);color:var(--grn)}

.inp{background:var(--bg);border:1px solid var(--bdr);border-radius:var(--rs);padding:7px 10px;color:var(--t1);font-size:12px;width:100%;transition:.15s;font-family:inherit}
.inp:focus{outline:none;border-color:var(--acc)}
select.inp{cursor:pointer}
.lbl{font-size:11px;color:var(--t2);font-weight:500;margin-bottom:3px;display:block}

.sb{padding:7px 10px;border-radius:var(--rs);margin-bottom:3px;font-size:11px;cursor:pointer;border-left:3px solid;transition:.12s}
.sb:hover{transform:translateX(2px)}
.sb.patent{background:rgba(124,108,240,.1);border-color:var(--patent)}
.sb.control{background:var(--cyn2);border-color:var(--control)}
.sb.exam{background:var(--red2);border-color:var(--exam)}
.sb.review{background:var(--ylw2);border-color:var(--review)}
.sb.rest{background:var(--grn2);border-color:var(--rest)}
.sb.exercise{background:rgba(255,126,126,.1);border-color:var(--exercise)}
.sb.output{background:var(--pnk2);border-color:var(--output)}
.sb.answer{background:var(--blu2);border-color:var(--blu)}

.chk{display:flex;align-items:flex-start;gap:7px;cursor:pointer;margin-bottom:5px}
.chk input{display:none}
.chk-b{width:16px;height:16px;border:2px solid var(--bdr);border-radius:4px;display:flex;align-items:center;justify-content:center;transition:.15s;flex-shrink:0;margin-top:1px}
.chk input:checked+.chk-b{background:var(--acc);border-color:var(--acc)}
.chk input:checked+.chk-b::after{content:'âœ“';color:#fff;font-size:10px;font-weight:700}
.chk input:checked~.chk-t{color:var(--t3);text-decoration:line-through}
.chk-t{font-size:12px;flex:1;line-height:1.4}

.sg{display:grid;grid-template-columns:repeat(2,1fr);gap:6px}
.si{text-align:center;padding:10px;background:var(--bg);border-radius:var(--rs)}
.sv{font-size:20px;font-weight:700;font-family:'JetBrains Mono',monospace}
.sl{font-size:9px;color:var(--t2);margin-top:2px}

.cg{display:grid;grid-template-columns:repeat(7,1fr);gap:2px}
.ch{font-size:10px;text-align:center;color:var(--t3);padding:3px;font-weight:600}
.cd{padding:3px;border-radius:var(--rs);background:var(--bg);border:1px solid transparent;cursor:pointer;font-size:10px;min-height:38px;display:flex;flex-direction:column;align-items:center;transition:.12s}
.cd:hover{border-color:var(--acc)}.cd.today{border-color:var(--acc);background:rgba(124,108,240,.06)}
.cd.sel{background:rgba(124,108,240,.12);border-color:var(--acc2)}
.cd.blk{background:rgba(239,107,90,.06);border-color:rgba(239,107,90,.2)}
.cd.empty{background:transparent;cursor:default;border:none}
.cdots{display:flex;gap:1px;margin-top:2px;flex-wrap:wrap;justify-content:center}
.cdot{width:3px;height:3px;border-radius:50%}

.mo{position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:1000;display:flex;align-items:center;justify-content:center;padding:16px;backdrop-filter:blur(4px)}
.md{background:var(--bg3);border:1px solid var(--bdr);border-radius:var(--r);padding:20px;width:100%;max-width:440px;max-height:80vh;overflow-y:auto}
.mt{font-size:15px;font-weight:700;margin-bottom:14px}

.badge{display:inline-flex;padding:2px 7px;border-radius:8px;font-size:9px;font-weight:600}
.mb{font-size:9px;padding:1px 5px;border-radius:4px;font-weight:600}

.tr{display:flex;min-height:42px;border-bottom:1px solid rgba(42,48,69,.5)}
.tl{width:44px;flex-shrink:0;font-size:10px;font-family:'JetBrains Mono',monospace;color:var(--t3);padding:3px 6px 0 0;text-align:right}
.tc{flex:1;padding:2px 3px}

.alarm{position:fixed;top:0;left:0;right:0;background:linear-gradient(135deg,var(--acc),var(--red));color:#fff;padding:10px 16px;text-align:center;font-size:12px;font-weight:600;z-index:2000;animation:sd .3s}
@keyframes sd{from{transform:translateY(-100%)}to{transform:translateY(0)}}
@keyframes fi{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.fi{animation:fi .25s ease}

.pomo{text-align:center;padding:14px;background:var(--bg);border-radius:var(--r)}
.pomo-t{font-size:44px;font-family:'JetBrains Mono',monospace;font-weight:600;letter-spacing:2px}
.pomo-l{font-size:11px;color:var(--t2);margin-top:3px}
.pomo-c{display:flex;gap:6px;justify-content:center;margin-top:10px}

.exp-h{cursor:pointer;display:flex;align-items:center;justify-content:space-between;padding:6px 0;user-select:none}
.exp-h:hover{color:var(--acc2)}
.exp-arr{font-size:10px;transition:.2s;color:var(--t3)}.exp-arr.open{transform:rotate(90deg)}

.cpi{padding:5px 8px;border-radius:var(--rs);margin-bottom:2px;font-size:11px;display:flex;align-items:center;gap:6px;transition:.1s}
.cpi:nth-child(odd){background:var(--bg)}
.cpi .num{color:var(--t3);font-family:'JetBrains Mono',monospace;font-size:10px;width:22px;flex-shrink:0}
.cpi .ttl{flex:1;line-height:1.3}
.cpi .done{color:var(--grn);font-size:12px}

@media(max-width:360px){.content{padding:10px 10px 90px}.hdr{padding:10px 12px}}
@media(min-width:768px){.sg{grid-template-columns:repeat(4,1fr)}}
.sb-sel{box-shadow:0 0 0 2px var(--acc)!important;background:rgba(124,108,240,.12)!important}
.edit-row{transition:transform .15s,background .15s}
.edit-row:active{transform:scale(.98)}
</style>
</head>
<body>
<div id="root"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<script type="text/babel">
const {useState,useEffect,useCallback,useMemo}=React;

// ===== CURRICULUM =====
const PB=[
  {id:'PB01',n:1,t:'íŠ¹í—ˆë²• ê°œê´€ ë° ì´ì¹™',p:'ì´ì¹™'},
  {id:'PB02',n:2,t:'ì‹ ê·œì„± (ì œ29ì¡° 1í•­)',p:'íŠ¹í—ˆìš”ê±´'},
  {id:'PB03',n:3,t:'ì§„ë³´ì„± (ì œ29ì¡° 2í•­), ì„ ì¶œì›ì£¼ì˜',p:'íŠ¹í—ˆìš”ê±´'},
  {id:'PB04',n:4,t:'í™•ëŒ€ëœ ì„ ì¶œì›ì£¼ì˜, ë¶ˆíŠ¹í—ˆì‚¬ìœ ',p:'íŠ¹í—ˆìš”ê±´'},
  {id:'PB05',n:5,t:'ê³µì§€ì˜ˆì™¸ì£¼ì¥ (ì œ30ì¡°)',p:'ì¶œì›ì œë„'},
  {id:'PB06',n:6,t:'ì •ë‹¹í•œ ê¶Œë¦¬ì, ì§ë¬´ë°œëª…',p:'ì¶œì›ì œë„'},
  {id:'PB07',n:7,t:'ë³´ì • (ì œ47ì¡°), ë³´ì •ê°í•˜ (ì œ51ì¡°)',p:'ì¶œì›ì œë„'},
  {id:'PB08',n:8,t:'ë¶„í• ì¶œì› (ì œ52ì¡°), ë³€ê²½/ë¶„ë¦¬ì¶œì›',p:'ì¶œì›ì œë„'},
  {id:'PB09',n:9,t:'ì‹¬ì‚¬ì œë„, ìš°ì„ ê¶Œì£¼ì¥',p:'ì¶œì›ì œë„'},
  {id:'PB10',n:10,t:'íŠ¹í—ˆê¶Œì˜ ë°œìƒ ë° íš¨ë ¥',p:'íŠ¹í—ˆê¶Œ'},
  {id:'PB11',n:11,t:'ì‹¤ì‹œê¶Œ (ì „ìš©/í†µìƒ/ë²•ì •ì‹¤ì‹œê¶Œ)',p:'íŠ¹í—ˆê¶Œ'},
  {id:'PB12',n:12,t:'íŠ¹í—ˆì¹¨í•´ ì¼ë°˜, ë³´í˜¸ë²”ìœ„ í•´ì„, ê· ë“±ë¡ ',p:'ì¹¨í•´'},
  {id:'PB13',n:13,t:'ê°„ì ‘ì¹¨í•´ (ì œ127ì¡°)',p:'ì¹¨í•´'},
  {id:'PB14',n:14,t:'ì´ìš©ê´€ê³„ (ì œ98ì¡°), ê¶Œë¦¬ë‚¨ìš©/ììœ ì‹¤ì‹œ í•­ë³€',p:'ì¹¨í•´'},
  {id:'PB15',n:15,t:'ì†í•´ë°°ìƒ (ì œ128ì¡°) (1)',p:'êµ¬ì œ'},
  {id:'PB16',n:16,t:'ì†í•´ë°°ìƒ (ì œ128ì¡°) (2)',p:'êµ¬ì œ'},
  {id:'PB17',n:17,t:'ì„ íƒ/ì˜ì•½ë°œëª…',p:'íŠ¹ìœ ë°œëª…'},
  {id:'PB18',n:18,t:'ìˆ˜ì¹˜í•œì •/íŒŒë¼ë¯¸í„° ë°œëª…',p:'íŠ¹ìœ ë°œëª…'},
  {id:'PB19',n:19,t:'êµ¬ì œìˆ˜ë‹¨ ì¢…í•©',p:'êµ¬ì œ'},
  {id:'PB20',n:20,t:'PBP, ê¸°ëŠ¥ì‹/ì ­ìŠ¨/ë§ˆì¿ ì‰¬ ì²­êµ¬í•­',p:'íŠ¹ìœ ì²­êµ¬í•­'},
  {id:'PB21',n:21,t:'ì‹¬íŒ ì¼ë°˜',p:'ì‹¬íŒ'},
  {id:'PB22',n:22,t:'ì¼ì‚¬ë¶€ì¬ë¦¬ ì›ì¹™ (ì œ163ì¡°)',p:'ì‹¬íŒ'},
  {id:'PB23',n:23,t:'ì¤‘ë³µì‹¬íŒì²­êµ¬ ê¸ˆì§€',p:'ì‹¬íŒ'},
  {id:'PB24',n:24,t:'ì •ì •ì‹¬íŒ (ì œ136ì¡°)',p:'ì‹¬íŒ'},
  {id:'PB25',n:25,t:'ë‹¤ë¥¸ ì‹¬íŒ/ì†Œì†¡ê³¼ì˜ ê´€ê³„',p:'ì‹¬íŒ'},
  {id:'PB26',n:26,t:'ê¶Œë¦¬ë²”ìœ„í™•ì¸ì‹¬íŒ (1)',p:'ì‹¬íŒ'},
  {id:'PB27',n:27,t:'ê¶Œë¦¬ë²”ìœ„í™•ì¸ì‹¬íŒ (2)',p:'ì‹¬íŒ'},
  {id:'PB28',n:28,t:'ì‹¬ê²°ì·¨ì†Œì†Œì†¡ì˜ ì‹¬ë¦¬ë²”ìœ„',p:'ì†Œì†¡'},
  {id:'PB29',n:29,t:'íŒê²°ì˜ íš¨ë ¥ (ê¸°ì†ë ¥)',p:'ì†Œì†¡'},
  {id:'PB30',n:30,t:'PCT êµ­ì œì¶œì› ë° íŠ¹ë¡€',p:'PCT'},
];

const PA=[
  {id:'PA01',n:1,t:'ë°œëª…ì˜ ì„±ë¦½ì„±',p:'P1',s:'ë¯¸ì™„ì„± ë°œëª…, ë°œëª…ì˜ ì •ì˜'},
  {id:'PA02',n:2,t:'ì‹ ê·œì„±/ì§„ë³´ì„± (1)',p:'P1',s:'ì‹ ê·œì„±(ì„ í–‰ë¬¸í—Œ ì ê²©), í™•ëŒ€ëœ ì„ ì¶œì›'},
  {id:'PA03',n:3,t:'ì§„ë³´ì„± (2)',p:'P1',s:'ì§„ë³´ì„± íŒë‹¨ ê¸°ì¤€, ìƒì—…ì  ì„±ê³µ, ì‚¬í›„ì  ê³ ì°° ê¸ˆì§€'},
  {id:'PA04',n:4,t:'ì§„ë³´ì„± (3)',p:'P1',s:'ê²°í•©ë°œëª…, ì„ íƒë°œëª… ë“±ì˜ ì§„ë³´ì„± íŒë‹¨'},
  {id:'PA05',n:5,t:'íŠ¹ìœ ë°œëª… (1)',p:'P1',s:'ìˆ˜ì¹˜í•œì •ë°œëª…, íŒŒë¼ë¯¸í„° ë°œëª…'},
  {id:'PA06',n:6,t:'íŠ¹ìœ ë°œëª… (2)',p:'P1',s:'ë¯¸ìƒë¬¼ ê¸°íƒ, ì‹ë¬¼ë°œëª… ë“±'},
  {id:'PA07',n:7,t:'ê¸°ì¬ë¶ˆë¹„ (1)',p:'P1',s:'ëª…í™•ì„± ìš”ê±´, ë’·ë°›ì¹¨ ìš”ê±´'},
  {id:'PA08',n:8,t:'ê¸°ì¬ë¶ˆë¹„ (2)',p:'P1',s:'ì‹¤ì‹œê°€ëŠ¥ ìš”ê±´ (42ì¡° 3í•­ 1í˜¸)'},
  {id:'PA09',n:9,t:'ë³´ì • (1)',p:'P1',s:'ì‹ ê·œì‚¬í•­ ì¶”ê°€ ê¸ˆì§€ íŒë‹¨ ê¸°ì¤€'},
  {id:'PA10',n:10,t:'ë¶„í• ì¶œì›',p:'P1',s:'ë¶„í• ì¶œì›ì˜ ì‹œê¸°, ì ë²• ìš”ê±´'},
  {id:'PA11',n:11,t:'ìš°ì„ ê¶Œì£¼ì¥',p:'P1',s:'ì¡°ì•½ìš°ì„ ê¶Œì˜ ì„±ë¦½ìš”ê±´ê³¼ íš¨ê³¼'},
  {id:'PA12',n:12,t:'PBP ì²­êµ¬í•­',p:'P1',s:'ì œì¡°ë°©ë²•ì´ ê¸°ì¬ëœ ë¬¼ê±´ë°œëª… í•´ì„'},
  {id:'PA13',n:13,t:'ê¶Œë¦¬ë²”ìœ„í™•ì¸',p:'P2',s:'í™•ì¸ì˜ ì´ìµê³¼ ì‚¬ì‹¤ì  ë™ì¼ì„± íŒë‹¨'},
  {id:'PA14',n:14,t:'ë³´ì •ì œë„ ë“±',p:'P2',s:'ìš°ì„ ê¶Œ ì‹¤ì²´ì  íš¨ë ¥, ì˜ê²¬ì œì¶œê¸°íšŒ'},
  {id:'PA15',n:15,t:'ë³´ì •ê°í•˜',p:'P2',s:'ìƒˆë¡œìš´ ê±°ì ˆì´ìœ , ë³´ì •ê°í•˜ ìœ„ë²•ì„±'},
  {id:'PA16',n:16,t:'ì •ë‹¹ê¶Œë¦¬ì',p:'P2',s:'ë¬´ê¶Œë¦¬ì ì¶œì› êµ¬ì œ, ì´ì „ì²­êµ¬'},
  {id:'PA17',n:17,t:'ì¹¨í•´ ì¼ë°˜',p:'P2',s:'ì¹¨í•´ ì„±ë¦½ìš”ê±´, êµ¬ì„±ìš”ì†Œ ì™„ë¹„'},
  {id:'PA18',n:18,t:'ê°„ì ‘ì¹¨í•´',p:'P2',s:'ì „ìš©í’ˆì„± íŒë‹¨, ê°„ì ‘ì¹¨í•´ ì„±ë¦½ìš”ê±´'},
  {id:'PA19',n:19,t:'ì´ìš©ê´€ê³„',p:'P2',s:'ì´ìš©ê´€ê³„ ì„±ë¦½ê³¼ í†µìƒì‹¤ì‹œê¶Œ í—ˆë½ì‹¬íŒ'},
  {id:'PA20',n:20,t:'ê· ë“±ë¡ ',p:'P3',s:'ê· ë“± ì œ3ìš”ê±´, ì˜ì‹ì  ì œì™¸ ë²•ë¦¬'},
  {id:'PA21',n:21,t:'ì¹¨í•´ í•­ë³€ (1)',p:'P3',s:'ììœ ì‹¤ì‹œê¸°ìˆ ì˜ í•­ë³€'},
  {id:'PA22',n:22,t:'ì¹¨í•´ í•­ë³€ (2)',p:'P3',s:'ê¶Œë¦¬ë‚¨ìš©ì˜ í•­ë³€'},
  {id:'PA23',n:23,t:'ê¸ˆì§€ì²­êµ¬',p:'P3',s:'ê¸ˆì§€ì²­êµ¬ê¶Œ í–‰ì‚¬ ìš”ê±´'},
  {id:'PA24',n:24,t:'ì†í•´ë°°ìƒ (1)',p:'P3',s:'ì†í•´ë°°ìƒì•¡ ì‚°ì • ì¼ë°˜'},
  {id:'PA25',n:25,t:'ì†í•´ë°°ìƒ (2)',p:'P3',s:'êµ¬ì²´ì  ì†í•´ì•¡ ì‚°ì • ì‚¬ë¡€'},
  {id:'PA26',n:26,t:'ì†í•´ë°°ìƒ (3)',p:'P3',s:'ê¸°ì—¬ìœ¨, ììœ ì‹¬ì¦, ì§•ë²Œì  ì†ë°°'},
  {id:'PA27',n:27,t:'ì˜ì•½/ì„ íƒë°œëª…',p:'P3',s:'ì˜ì•½ìš©ë„ ì§„ë³´ì„±, ê²°ì •í˜• ë°œëª…'},
  {id:'PA28',n:28,t:'ì‹¬íŒ ì¼ë°˜',p:'P4',s:'ì‹¬íŒ ì‹¬ë¦¬ ì›ì¹™, ì‹¬íŒê´€ ì œì²™/ê¸°í”¼'},
  {id:'PA29',n:29,t:'ê³µìœ /ì¼ì‚¬ë¶€ì¬ë¦¬',p:'P4',s:'ê³µìœ íŠ¹í—ˆê¶Œ ê¶Œë¦¬ê´€ê³„, ì „ì›í•©ì˜ì²´'},
  {id:'PA30',n:30,t:'ì‹¤ì‹œê¶Œ/ë¬´íš¨',p:'P4',s:'ì‹¤ì‹œê³„ì•½ê³¼ ë¬´íš¨ì‹¬íŒ ê´€ê³„'},
  {id:'PA31',n:31,t:'ì •ì •/ì¬ì‹¬',p:'P4',s:'ì •ì •ì‹¬íŒ ê´€ê³„, ì¬ì‹¬ì‚¬ìœ  (ì „ì›í•©ì˜ì²´)'},
  {id:'PA32',n:32,t:'ì†Œì†¡ì‹¬ë¦¬ (1)',p:'P4',s:'í™•ì¸ëŒ€ìƒë°œëª… íŠ¹ì •, ê°í•˜ì‹¬ê²° ì‹¬ë¦¬'},
  {id:'PA33',n:33,t:'ì†Œì†¡ì‹¬ë¦¬ (2)',p:'P4',s:'ê²°ì •ê³„ ì‹¬ê²°ì·¨ì†Œ, ìƒˆë¡œìš´ ì‚¬ìœ  ì£¼ì¥'},
  {id:'PA34',n:34,t:'íŒê²°íš¨ë ¥',p:'P4',s:'ë³€ë¡ ì£¼ì˜, ê¸°ì†ë ¥ ë²”ìœ„'},
];

const PW=[
  {id:'PW01',n:1,t:'ë‹µì•ˆì‘ì„±ë²•',s:'ë‹µì•ˆì‘ì„±ë¡  (Mokcha ì¡ê¸°)'},
  {id:'PW02',n:2,t:'íŠ¹í—ˆë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” ë°œëª…',s:'ë¯¸ì™„ì„± ë°œëª…'},
  {id:'PW03',n:3,t:'ì‹ ê·œì„±, ì§„ë³´ì„±, í™•ëŒ€ëœ ì„ ì¶œì›',s:'íŠ¹í—ˆìš”ê±´'},
  {id:'PW04',n:4,t:'ëª…ì„¸ì„œ ê¸°ì¬ë¶ˆë¹„',s:'42ì¡° 3í•­1í˜¸, 4í•­1í˜¸/2í˜¸'},
  {id:'PW05',n:5,t:'ë¬´ê¶Œë¦¬ì ì¶œì›, ì´ì „ì²­êµ¬',s:'ì •ë‹¹ê¶Œë¦¬ì'},
  {id:'PW06',n:6,t:'ê³µì§€ì˜ˆì™¸ì£¼ì¥, ìš°ì„ ê¶Œì£¼ì¥',s:'ì´ìµ/ì‹¬ì‚¬'},
  {id:'PW07',n:7,t:'ë³´ì •ì˜ ì ë²•ì„±, ë¶„í• ì¶œì›',s:'ë³´ì •/ë¶„í• '},
  {id:'PW08',n:8,t:'ë³´ìƒê¸ˆì²­êµ¬ê¶Œ',s:'ì¶œì›ê³µê°œ í›„ ì¡°ì¹˜'},
  {id:'PW09',n:9,t:'íŠ¹í—ˆì¹¨í•´ ë¶„ìŸ',s:'êµ¬ì„±ìš”ì†Œ ì™„ë¹„'},
  {id:'PW10',n:10,t:'ì´ìš©ê´€ê³„, ê¶Œë¦¬ë²”ìœ„í™•ì¸ì‹¬íŒ',s:'ì¹¨í•´(2)'},
  {id:'PW11',n:11,t:'ê°„ì ‘ì¹¨í•´ ì„±ë¦½ìš”ê±´',s:'ì „ìš©í’ˆì„± ë“±'},
  {id:'PW12',n:12,t:'ì „ìš©ì‹¤ì‹œê¶Œ, í†µìƒì‹¤ì‹œê¶Œ',s:'ì‹¤ì‹œê¶Œ(1)'},
  {id:'PW13',n:13,t:'ë²•ì •ì‹¤ì‹œê¶Œ',s:'ì‹¤ì‹œê¶Œ(2)'},
  {id:'PW14',n:14,t:'ì¹¨í•´ ê¸ˆì§€ ë° ì†í•´ë°°ìƒ',s:'êµ¬ì œìˆ˜ë‹¨'},
  {id:'PW15',n:15,t:'íŒŒë¼ë¯¸í„°, ì„ íƒ, ì˜ì•½ë°œëª…',s:'íŠ¹ìœ ë°œëª…'},
  {id:'PW16',n:16,t:'PBP, ê¸°ëŠ¥ì‹, ì ­ìŠ¨, ë§ˆì¿ ì‰¬',s:'íŠ¹ìœ ì²­êµ¬í•­'},
  {id:'PW17',n:17,t:'íŠ¹í—ˆë¬´íš¨ì‹¬íŒ',s:'ì´í•´ê´€ê³„ì¸'},
  {id:'PW18',n:18,t:'ì •ì •ì‹¬íŒ, ì •ì •ë¬´íš¨',s:'ì •ì •ì œë„'},
  {id:'PW19',n:19,t:'ê¶Œë¦¬ë²”ìœ„í™•ì¸ì‹¬íŒ',s:'ê¶Œë¦¬ë²”ìœ„'},
  {id:'PW20',n:20,t:'PCT íŠ¹ë¡€',s:'PCT'},
];

const CE=[
  {id:'CE00',n:0,t:'ì˜¤ë¦¬ì—”í…Œì´ì…˜',s:'ê³¼ëª© ì†Œê°œ, í•™ìŠµë°©ë²•, ë¼í”Œë¼ìŠ¤ ë³€í™˜ ê¸°ì´ˆ'},
  {id:'CE01',n:1,t:'ìë™ ì œì–´ê³„ì˜ ê°œìš”',s:'ê°œë£¨í”„/íë£¨í”„, ì„œë³´/í”„ë¡œì„¸ìŠ¤, ì—°ì†/ë¶ˆì—°ì†'},
  {id:'CE02',n:2,t:'1ì¥ ë¬¸ì œí’€ì´',s:'ìë™ ì œì–´ê³„ ê°œìš” ì—°ìŠµë¬¸ì œ'},
  {id:'CE03',n:3,t:'ë¸”ë¡ì„ ë„, ì‹ í˜¸íë¦„ë„, ì—°ì‚°ì¦í­ê¸°',s:'ë“±ê°€ë³€í™˜, ë©”ì´ìŠ¨ ì´ë“ê³µì‹, Op-Amp'},
  {id:'CE04',n:4,t:'2ì¥ ë¬¸ì œí’€ì´',s:'ë¸”ë¡ì„ ë„ ë³€í™˜, ì‹ í˜¸íë¦„ë„ í•´ì„'},
  {id:'CE05',n:5,t:'ê³¼ë„ ì‘ë‹µ (1)',s:'í‘œì¤€ì‹œí—˜ì…ë ¥, íŠ¹ì„±ë°©ì •ì‹, íŠ¹ì„±ê·¼ ì•ˆì •ë„'},
  {id:'CE06',n:6,t:'ê³¼ë„ ì‘ë‹µ (2)',s:'1ì°¨/2ì°¨ ì§€ì—°ê³„, ì œë™ë¹„(Î¶), ì˜¤ë²„ìŠˆíŠ¸'},
  {id:'CE07',n:7,t:'ì •ìƒ ì‘ë‹µ (ì˜¤ì°¨ ë° ê°ë„)',s:'ìµœì¢…ê°’ ì •ë¦¬, Typeë³„ ì •ìƒí¸ì°¨, ê°ë„'},
  {id:'CE08',n:8,t:'3ì¥ ë¬¸ì œí’€ì´',s:'ê³¼ë„ì‘ë‹µ, ì •ìƒì˜¤ì°¨ ë¬¸ì œ'},
  {id:'CE09',n:9,t:'ì£¼íŒŒìˆ˜ ì˜ì—­ í•´ì„',s:'ì£¼íŒŒìˆ˜ ì „ë‹¬í•¨ìˆ˜, ë³´ë“œì„ ë„, ì´ë“/ìœ„ìƒì—¬ìœ '},
  {id:'CE10',n:10,t:'4ì¥ ë¬¸ì œí’€ì´',s:'ì£¼íŒŒìˆ˜ ì˜ì—­ í•´ì„ ë¬¸ì œ'},
  {id:'CE11',n:11,t:'ì•ˆì •ë„ íŒë³„',s:'Routh íŒë³„ë²•, Nyquist ì„ ë„, ë³´ë“œì„ ë„ ì•ˆì •ë„'},
  {id:'CE12',n:12,t:'5ì¥ ë¬¸ì œí’€ì´',s:'ì•ˆì •ë„ íŒë³„ë²• ë¬¸ì œ'},
  {id:'CE13',n:13,t:'ê·¼ê¶¤ì ë²•',s:'ê·¼ê¶¤ì  ì‘ì„±ë²•, ì ê·¼ì„ , ì´íƒˆì /ë¶„ì§€ì '},
  {id:'CE14',n:14,t:'6ì¥ ë¬¸ì œí’€ì´',s:'ê·¼ê¶¤ì ë²• ë¬¸ì œ'},
  {id:'CE15',n:15,t:'ìƒíƒœ ê³µê°„ë²• (1)',s:'ìƒíƒœë°©ì •ì‹, íŠ¹ì„±ë°©ì •ì‹, ìƒíƒœì²œì´í–‰ë ¬'},
  {id:'CE16',n:16,t:'ìƒíƒœ ê³µê°„ë²• (2) & Zë³€í™˜',s:'ê°€ì œì–´ì„±/ê°€ê´€ì¸¡ì„±, Zë³€í™˜, Zí‰ë©´ ì•ˆì •ë„'},
  {id:'CE17',n:17,t:'7ì¥ ë¬¸ì œí’€ì´',s:'ìƒíƒœê³µê°„ë²•, Zë³€í™˜ ë¬¸ì œ'},
  {id:'CE18',n:18,t:'ì‹œí€€ìŠ¤ ì œì–´',s:'ë…¼ë¦¬íšŒë¡œ, ë“œëª¨ë¥´ê°„, ìê¸°ìœ ì§€íšŒë¡œ'},
  {id:'CE19',n:19,t:'8ì¥ ë¬¸ì œí’€ì´',s:'ì‹œí€€ìŠ¤ ì œì–´, ë…¼ë¦¬íšŒë¡œ ë¬¸ì œ'},
];

const CRS=[
  {k:'pb',nm:'íŠ¹í—ˆë²• ê¸°ë³¸ì´ë¡ ',sh:'ê¸°ë³¸',lc:PB,cl:'patent',tot:30,ic:'ğŸ“–'},
  {k:'pa',nm:'íŠ¹í—ˆë²• íŒë¡€ì‹¬í™”',sh:'íŒë¡€',lc:PA,cl:'patent',tot:34,ic:'âš–ï¸'},
  {k:'pw',nm:'2ì°¨ ë‹µì•ˆì‘ì„±',sh:'ë‹µì‘',lc:PW,cl:'exam',tot:20,ic:'âœï¸'},
  {k:'ce',nm:'ì œì–´ê³µí•™ ì¸ê°•',sh:'ì œì–´',lc:CE,cl:'control',tot:20,ic:'âš™ï¸'},
];

const SRI=[1,3,7,14,30,60];
const SRL=['1ì¼í›„','3ì¼í›„','7ì¼í›„','14ì¼í›„','30ì¼í›„','60ì¼í›„'];

// Utils
const fmt=d=>{const x=new Date(d);return`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,'0')}-${String(x.getDate()).padStart(2,'0')}`};
const td=()=>fmt(new Date());
const addD=(d,n)=>{const r=new Date(d);r.setDate(r.getDate()+n);return fmt(r)};
const DN=['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '];
const gdn=d=>DN[new Date(d).getDay()];
const diffD=(a,b)=>Math.ceil((new Date(b)-new Date(a))/864e5);
const fT=m=>`${Math.floor(m/60)}h ${m%60}m`;
const EXAM='2026-07-31';
const EXAM2='2026-08-01'; // ì œì–´ê³µí•™ ì‹œí—˜ì¼
const gDD=()=>{const d=diffD(td(),EXAM);return d>0?d:0};

const LS={
  g:(k,d)=>{try{const v=localStorage.getItem('bp3_'+k);return v?JSON.parse(v):d}catch{return d}},
  s:(k,v)=>{try{localStorage.setItem('bp3_'+k,JSON.stringify(v))}catch{}},
};

// Schedule Generator â€” date-based phases
const PH1_END='2026-03-31',PH2_END='2026-06-30';
function gPh(date){if(date<=PH1_END)return 1;if(date<=PH2_END)return 2;return 3}

function genSch(start,blocked=[],initIx={}){
  const s={};const dday=diffD(start,EXAM);const tw=Math.floor(dday/7);
  let ix={pb:initIx.pb||0,pa:initIx.pa||0,pw:initIx.pw||0,ce:initIx.ce||0};
  let rc=0; // íšŒë… ìˆœí™˜ ì¹´ìš´í„°
  const RTOP=['íŠ¹í—ˆìš”ê±´Â·ì§„ë³´ì„±','ì¹¨í•´Â·ê· ë“±ë¡ Â·ê°„ì ‘ì¹¨í•´','ì‹¬íŒÂ·ì •ì •Â·ì¼ì‚¬ë¶€ì¬ë¦¬','ì†Œì†¡Â·ê¶Œë¦¬ë²”ìœ„Â·PCT'];

  for(let w=0;w<tw&&w<60;w++){for(let d=0;d<7;d++){
    const date=addD(start,w*7+d);
    if(new Date(date)>new Date(EXAM))break;
    if(blocked.includes(date))continue;
    const dow=new Date(date).getDay(),ph=gPh(date),it=[];

    if(dow===0){ // ===== SUNDAY =====
      if(ph===1){
        it.push({time:'09:00',dur:90,tp:'review',t:'ğŸ“– ì£¼ê°„ ë‹¨ê¶Œí™” ì •ë¦¬ (í˜•ê´‘íœ ë³µìŠµ)',md:'output',sj:'patent'});
        it.push({time:'10:30',dur:20,tp:'rest',t:'â˜• íœ´ì‹'});
        it.push({time:'10:50',dur:60,tp:'review',t:'âš™ï¸ ì œì–´ê³µí•™ ì£¼ê°„ ë³µìŠµ',md:'output',sj:'control'});
      } else {
        it.push({time:'09:00',dur:120,tp:'exam',t:ph===2?'ğŸ“ ê¸°ì¶œ ì‹œê°„ì œí•œ í’€ì´ (2h ì‹œë®¬)':'ğŸ“ ì‹¤ì „ ëª¨ì˜ì‹œí—˜ (2h ì™„ì „ì‹œë®¬)',md:'output',sj:'patent'});
        it.push({time:'11:00',dur:30,tp:'review',t:'[ë¶„ì„] ì±„ì +ì‚¬ì•ˆí¬ì„­ ë¶„ì„',md:'output',sj:'patent'});
        it.push({time:'11:30',dur:30,tp:'rest',t:'â˜• íœ´ì‹'});
      }
      it.push({time:'12:00',dur:60,tp:'rest',t:'ğŸš ì ì‹¬ + íœ´ì‹'});
      it.push({time:'13:00',dur:50,tp:'exercise',t:'ğŸƒ ìš´ë™/ì‚°ì±…'});
      it.push({time:'13:50',dur:10,tp:'rest',t:'ğŸš¿ ì •ë¦¬'});
      if(ph>=2){
        it.push({time:'14:00',dur:90,tp:'review',t:'ğŸ“– íšŒë…: ì·¨ì•½ íŒŒíŠ¸ ì§‘ì¤‘ ë³µìŠµ',md:'output',sj:'patent'});
        it.push({time:'15:30',dur:60,tp:'review',t:'âš™ï¸ ì œì–´ê³µí•™ ê¸°ì¶œìœ í˜• ë³µìŠµ',md:'output',sj:'control'});
      } else {
        it.push({time:'14:00',dur:60,tp:'review',t:'ğŸ“– ì´ë²ˆ ì£¼ í•™ìŠµ ì´ë³µìŠµ',md:'output',sj:'patent'});
      }
      it.push({time:'16:30',dur:30,tp:'rest',t:'ğŸµ ììœ ì‹œê°„'});
    } else { // ===== WEEKDAY + SAT =====
      it.push({time:'06:30',dur:30,tp:'rest',t:'ğŸŒ… ê¸°ìƒ + ì¤€ë¹„'});

      // â”€â”€ MORNING: Patent â”€â”€
      if(ph===1){ // ~3ì›”: ê¸°ë³¸ì´ë¡  ì™„ê°• + ë‹¨ê¶Œí™” 1ì°¨ ì™„ì„±
        it.push({time:'07:00',dur:20,tp:'patent',t:'ğŸ“• ë²•ì „ ì¡°ë¬¸ ì°¾ê¸° í›ˆë ¨ (5~10ì´ˆ)',md:'input',sj:'patent'});
        if(ix.pb<30){
          const l=PB[ix.pb];
          it.push({time:'07:20',dur:80,tp:'patent',t:`[ì…ë ¥] ê¸°ë³¸ ${l.n}ê°•: ${l.t}`,md:'input',sj:'patent',lid:l.id,cr:'pb'});
          it.push({time:'08:40',dur:10,tp:'rest',t:'â˜• íœ´ì‹'});
          it.push({time:'08:50',dur:40,tp:'output',t:`[ì¶œë ¥] ê¸°ë³¸ ${l.n}ê°• ë‹¨ê¶Œí™” (í˜•ê´‘íœ+ìš”ì•½)`,md:'output',sj:'patent'});
        } else {
          const l=PA[Math.min(ix.pa,33)];
          it.push({time:'07:20',dur:80,tp:'patent',t:`[ì…ë ¥] íŒë¡€ ${l.n}ê°•: ${l.t}`,md:'input',sj:'patent',lid:l.id,cr:'pa'});
          it.push({time:'08:40',dur:10,tp:'rest',t:'â˜• íœ´ì‹'});
          it.push({time:'08:50',dur:40,tp:'output',t:`[ì¶œë ¥] íŒë¡€ ${l.n}ê°• ë‹¨ê¶Œí™”+ìŸì ì •ë¦¬`,md:'output',sj:'patent'});
        }
      } else if(ph===2){ // 4~6ì›”: ê¸°ì¶œ/GS + íšŒë… + íŒë¡€/ë‹µì‘
        const dt=dow%3;
        if(dt===0){ // ê¸°ì¶œ/GS í’€ì´ì¼
          it.push({time:'07:00',dur:90,tp:'exam',t:'ğŸ“ ê¸°ì¶œë¬¸ì œ/GS í’€ì´ (ì‹œê°„ì œí•œ)',md:'output',sj:'patent'});
          it.push({time:'08:30',dur:15,tp:'rest',t:'â˜• íœ´ì‹'});
          it.push({time:'08:45',dur:45,tp:'review',t:'[ë¶„ì„] ì±„ì +ëª¨ë²”ë‹µì•ˆ ë¹„êµ+ì‚¬ì•ˆí¬ì„­',md:'output',sj:'patent'});
        } else if(dt===1){ // íŒë¡€ì‹¬í™” + ë‹µì•ˆì‘ì„±
          if(ix.pa<34){const l=PA[ix.pa];
            it.push({time:'07:00',dur:70,tp:'patent',t:`[ì…ë ¥] íŒë¡€ ${l.n}ê°•: ${l.t}`,md:'input',sj:'patent',lid:l.id,cr:'pa'});
          } else {
            it.push({time:'07:00',dur:70,tp:'review',t:'[íšŒë…] íŒë¡€ì‹¬í™” í•µì‹¬ìŸì  íšŒë…',md:'output',sj:'patent'});
          }
          it.push({time:'08:10',dur:10,tp:'rest',t:'â˜• íœ´ì‹'});
          const lw=PW[Math.min(ix.pw,19)];
          it.push({time:'08:20',dur:60,tp:'answer',t:`[ì¶œë ¥] ë‹µì‘: ${lw.t} (ì‚¬ì•ˆí¬ì„­+16ìª½)`,md:'output',sj:'patent',lid:lw.id,cr:'pw'});
        } else { // íšŒë…ì¼
          it.push({time:'07:00',dur:90,tp:'review',t:`[íšŒë…] íŠ¹í—ˆë²•: ${RTOP[rc%4]}`,md:'output',sj:'patent'});
          it.push({time:'08:30',dur:15,tp:'rest',t:'â˜• íœ´ì‹'});
          it.push({time:'08:45',dur:45,tp:'output',t:'[ì¶œë ¥] íšŒë… í•µì‹¬ í‚¤ì›Œë“œ ê¸°ì–µí™•ì¸',md:'output',sj:'patent'});
          rc++;
        }
      } else { // 7ì›”: ì••ì¶•íšŒë… + ì‹œë®¬ë ˆì´ì…˜
        if(dow%2===1){
          it.push({time:'07:00',dur:60,tp:'review',t:'[ì••ì¶•íšŒë…] ì „ë²”ìœ„ ì†ë… (8-4-2-1)',md:'output',sj:'patent'});
          it.push({time:'08:00',dur:15,tp:'rest',t:'â˜• íœ´ì‹'});
          it.push({time:'08:15',dur:75,tp:'exam',t:'[ì‹œë®¬] ì‹¤ì „ ëª¨ì˜ë‹µì•ˆ (ì‹œê°„ì œí•œ)',md:'output',sj:'patent'});
        } else {
          it.push({time:'07:00',dur:90,tp:'exam',t:'ğŸ“ ê¸°ì¶œ ì‹¤ì „í’€ì´ (2h ì‹œë®¬)',md:'output',sj:'patent'});
          it.push({time:'08:30',dur:15,tp:'rest',t:'â˜• íœ´ì‹'});
          it.push({time:'08:45',dur:45,tp:'review',t:'[ë¶„ì„] ì±„ì +ì·¨ì•½ì  ë³´ê°•',md:'output',sj:'patent'});
        }
      }
      it.push({time:'09:35',dur:25,tp:'rest',t:'â˜• íœ´ì‹ + ê°„ì‹'});

      // â”€â”€ MID: Control â”€â”€
      if(ix.ce>=20){
        it.push({time:'10:00',dur:90,tp:'control',t:'[ë³µìŠµ] ì œì–´ê³µí•™ ê¸°ì¶œìœ í˜• ë°˜ë³µ',md:'output',sj:'control'});
      } else {
        const cl=CE[Math.min(ix.ce,19)];
        it.push({time:'10:00',dur:90,tp:'control',t:`[ì…ë ¥] ì œì–´ ${cl.n}ê°•: ${cl.t}`,md:'input',sj:'control',lid:cl.id,cr:'ce'});
      }
      it.push({time:'11:30',dur:15,tp:'rest',t:'ğŸ§˜ íœ´ì‹'});
      it.push({time:'11:45',dur:45,tp:'output',t:'[ì¶œë ¥] ì œì–´ê³µí•™ ë¬¸ì œí’€ì´+ê³„ì‚°ê¸°',md:'output',sj:'control'});
      it.push({time:'12:30',dur:60,tp:'rest',t:'ğŸš ì ì‹¬ì‹ì‚¬'});
      it.push({time:'13:30',dur:30,tp:'rest',t:'ğŸ˜´ ë‚®ì '});
      it.push({time:'14:00',dur:40,tp:'exercise',t:'ğŸƒ ìš´ë™ (ìœ ì‚°ì†Œ/ê·¼ë ¥)'});
      it.push({time:'14:40',dur:20,tp:'rest',t:'ğŸš¿ ì •ë¦¬'});

      // â”€â”€ AFTERNOON: Review â”€â”€
      it.push({time:'15:00',dur:80,tp:'review',t:'[ë³µìŠµ] íŠ¹í—ˆë²• ê°„ê²©ë°˜ë³µ',md:'output',sj:'patent'});
      it.push({time:'16:20',dur:20,tp:'rest',t:'â˜• íœ´ì‹'});
      it.push({time:'16:40',dur:80,tp:'review',t:'[ë³µìŠµ] ì œì–´ê³µí•™ ê°„ê²©ë°˜ë³µ',md:'output',sj:'control'});
      it.push({time:'18:00',dur:60,tp:'rest',t:'ğŸš ì €ë…ì‹ì‚¬'});
      it.push({time:'19:00',dur:30,tp:'rest',t:'ğŸµ ììœ ì‹œê°„'});

      // â”€â”€ EVENING â”€â”€
      if(dow===6){
        it.push({time:'19:30',dur:120,tp:'exam',t:'ğŸ“ í† ìš” ëª¨ì˜ì‹œí—˜ (2h ì‹¤ì „ì‹œë®¬)',md:'output',sj:'patent'});
        it.push({time:'21:30',dur:30,tp:'review',t:'[ì •ë¦¬] ì±„ì +ì‚¬ì•ˆí¬ì„­ ë¶„ì„',md:'output'});
      } else if(ph===1){
        it.push({time:'19:30',dur:60,tp:'review',t:'[ì •ë¦¬] ë‹¨ê¶Œí™” ìµœì¢…ì •ë¦¬+ë‚´ì¼ì¤€ë¹„',md:'output',sj:'patent'});
      } else if(ph===2){
        it.push({time:'19:30',dur:80,tp:'exam',t:`ğŸ“ ê¸°ì¶œë¶„ì„ (${dow%2===0?'íŠ¹í—ˆë²•':'ì œì–´ê³µí•™'})`,md:'output',sj:dow%2===0?'patent':'control'});
        it.push({time:'20:50',dur:10,tp:'rest',t:'â˜•'});
        it.push({time:'21:00',dur:30,tp:'review',t:'[ì •ë¦¬] ì˜¤ëŠ˜ ì´ì •ë¦¬+íšŒë…ë©”ëª¨',md:'output'});
      } else {
        it.push({time:'19:30',dur:80,tp:'review',t:'[ì••ì¶•íšŒë…] ì·¨ì•½íŒŒíŠ¸ ì§‘ì¤‘ë³´ê°•',md:'output',sj:'patent'});
        it.push({time:'20:50',dur:10,tp:'rest',t:'â˜•'});
        it.push({time:'21:00',dur:30,tp:'review',t:'[ì •ë¦¬] ë‚´ì¼ ì‹œë®¬ ë²”ìœ„ í™•ì¸',md:'output'});
      }
      it.push({time:'22:00',dur:30,tp:'rest',t:'ğŸŒ™ ì·¨ì¹¨ì¤€ë¹„'});

      // â”€â”€ Advance indices â”€â”€
      if(dow===1||dow===3||dow===5){
        if(ph===1){if(ix.pb<30)ix.pb++;else ix.pa=Math.min(ix.pa+1,34)}
        else if(ph===2&&dow%3===1){ix.pa=Math.min(ix.pa+1,34);if(dow>=3)ix.pw=Math.min(ix.pw+1,20)}
      }
      if(dow===2||dow===4)ix.ce=Math.min(ix.ce+1,20);
    }
    s[date]=it;
  }}
  return s;
}

const TIPS=[
  'ğŸ“• ë²•ì „ í›ˆë ¨: ë§¤ì¼ ì•„ì¹¨ ì¡°ë¬¸ ì°¾ê¸° ì—°ìŠµ! 5~10ì´ˆ ë‚´ì— ìœ„ì¹˜ë¥¼ ì°¾ëŠ” ê°ê°ì´ ì‹œí—˜ì¥ì—ì„œ ì‹œê°„ì„ ë²Œì–´ì¤ë‹ˆë‹¤.',
  'âœï¸ ì‚¬ì•ˆí¬ì„­ì´ ìµœê³  ë°°ì ! ç”²Â·ä¹™Â·ë‚ ì§œÂ·ì¶œì›ë²ˆí˜¸ë¥¼ ë‹µì•ˆì— ë°˜ë“œì‹œ í¬í•¨, â‘ â‘¡ì›ë¬¸ìë¡œ ì¤„ë°”ê¿ˆí•˜ë©° í’ë¶€í•˜ê²Œ!',
  'ğŸ“ ë‹µì•ˆ 16ìª½â†‘! íŒë¡€ í‚¤ì›Œë“œì— \'ì‘ì€ë”°ì˜´í‘œ\' ê°•ì¡° â†’ ì±„ì ìê°€ ì½ì§€ ì•Šê³  ë°”ë¡œ ë“ì  ì²˜ë¦¬í•©ë‹ˆë‹¤.',
  'ğŸ¯ ì£¼ê°„ íŠ¹í—ˆë²• 23.3ì‹œê°„â†‘! ë¯¼ì†Œë²•Â·ìƒí‘œë²• ë©´ì œ ì´ì ì„ íŠ¹í—ˆë²• ê¹Šì´ì— ì˜¬ì¸í•˜ì„¸ìš”.',
  'ğŸ“Š ë‹¨ê¶Œí™” 4ìƒ‰: íŒë¡€=íŒŒë€, í•™ì„¤/ê²€í† =ë¹¨ê°•, GSë…¼ì =ì´ˆë¡, í‚¤ì›Œë“œ=ë…¸ë‘ í˜•ê´‘íœ!',
  'âš–ï¸ ê²€í† (í•™ì„¤)ëŠ” 2ì¤„ ì´ë‚´ ë°©ì–´ì  ì‘ì„±. "~í•˜ë¯€ë¡œ íƒ€ë‹¹í•˜ë‹¤"ë¡œ ë§ˆë¬´ë¦¬!',
  'ğŸƒ ìš´ë™ = BDNF ì´‰ì§„ = ê¸°ì–µë ¥ 30%â†‘. ë§¤ì¼ 40ë¶„ ìš´ë™ ì‚¬ìˆ˜!',
  'ğŸ“‹ 7ì›” ì••ì¶•íšŒë…: 8â†’4â†’2â†’1ì¼ ê°„ê²©. ë§ˆì§€ë§‰ ë‚  10ì‹œê°„ì— ì±… í•œ ê¶Œ 1íšŒë…!',
  'âš™ï¸ ì œì–´ê³µí•™ P/F(50ì ): BodeÂ·RouthÂ·ìƒíƒœë°©ì •ì‹ ê¸°ì¶œìœ í˜• + ê³„ì‚°ê¸°(ë³µì†Œìˆ˜Â·í–‰ë ¬) ìˆ™ë‹¬!',
  'âœï¸ í•„ê¸°êµ¬ë¥¼ ì§€ê¸ˆ í™•ì •! ì œíŠ¸ìŠ¤íŠ¸ë¦¼ 0.7mm ë“± ë³¸ì¸ íœìœ¼ë¡œ í•„ì†ì„ ë¯¸ë¦¬ ì ê²€í•˜ì„¸ìš”.',
  'ğŸ“ GSëŠ” ìµœì†Œ 2ëª… ê°•ì‚¬ ìˆ˜ê°•! 32ê°œ ë…¼ì (4ë¬¸ì œÃ—8íšŒ) + ë¶ˆì˜íƒ€(ì˜ˆìƒ ì™¸ ë¬¸ì œ) ëŒ€ë¹„ê°€ í•µì‹¬.',
  'ğŸª‘ ì‹œë®¬ë ˆì´ì…˜: ì¢ì€ ì±…ìƒì— ë²•ì „Â·ë¬¸ì œì§€Â·ë‹µì•ˆì§€Â·ìŠ¤í†±ì›Œì¹˜ ë°°ì¹˜ â†’ ì‹¤ì „ ê°ê° ê·¹ëŒ€í™”!',
  'ğŸ§  ì—ë¹™í•˜ìš°ìŠ¤: í•™ìŠµ í›„ 24ì‹œê°„ ë‚´ 70%ë¥¼ ìŠìŠµë‹ˆë‹¤. ê°„ê²©ë°˜ë³µ ì²« ë³µìŠµì´ ê°€ì¥ ì¤‘ìš”!',
  'ğŸ“Œ ì›ì„œì ‘ìˆ˜ 4.20~4.24 â†’ ê²½ë ¥ì¦ëª…ì„œ ë“± ë©´ì œì„œë¥˜ ê¸°ê°„ ë‚´ ì œì¶œ í•„ìˆ˜! ìŠì§€ ë§ˆì„¸ìš”!',
];
// Key dates
const APP_START='2026-04-20',APP_END='2026-04-24';
const appDday=()=>{const d=diffD(td(),APP_START);return d>0?d:0};

// ===== APP =====
function App(){
  const[tab,setTab]=useState('dash');
  const[sch,setSch]=useState(()=>LS.g('sch',{}));
  const[log,setLog]=useState(()=>LS.g('log',{}));
  const[rq,setRq]=useState(()=>LS.g('rq',[]));
  const[blk,setBlk]=useState(()=>LS.g('blk',[]));
  const[sel,setSel]=useState(td());
  const[modal,setModal]=useState(null);
  const[pomoOn,setPomoOn]=useState(false);
  const[pomoT,setPomoT]=useState(50*60);
  const[pomoM,setPomoM]=useState('study');
  const[alarm,setAlarm]=useState(null);
  const[done,setDone]=useState(()=>LS.g('done',{}));
  const[cm,setCm]=useState(()=>{const d=new Date();return{y:d.getFullYear(),m:d.getMonth()}});
  const[wo,setWo]=useState(0);
  const[notes,setNotes]=useState(()=>LS.g('notes',{}));
  const[cp,setCp]=useState(()=>LS.g('cp',{}));
  const[settings,setSettings]=useState(()=>LS.g('set',{pomoS:50,pomoB:10}));
  const[exp,setExp]=useState({});
  const[editMode,setEditMode]=useState(false);
  const[moveSel,setMoveSel]=useState(null); // {date,idx} of selected item for move

  useEffect(()=>{LS.s('sch',sch)},[sch]);
  useEffect(()=>{LS.s('log',log)},[log]);
  useEffect(()=>{LS.s('rq',rq)},[rq]);
  useEffect(()=>{LS.s('blk',blk)},[blk]);
  useEffect(()=>{LS.s('done',done)},[done]);
  useEffect(()=>{LS.s('notes',notes)},[notes]);
  useEffect(()=>{LS.s('cp',cp)},[cp]);
  useEffect(()=>{LS.s('set',settings)},[settings]);

  // Init: mark PB01-PB11 as completed on first load, then generate schedule from PB12
  useEffect(()=>{
    const isFirst=!localStorage.getItem('bp3_init');
    if(isFirst){
      const pbDone=['PB01','PB02','PB03','PB04','PB05','PB06','PB07','PB08','PB09','PB10','PB11'];
      setCp(p=>({...p,pb:pbDone}));
      setSch(genSch(td(),blk,{pb:11}));
      localStorage.setItem('bp3_init','1');
    } else if(Object.keys(sch).length===0){
      const pbProg=(cp.pb||[]).length;
      const paProg=(cp.pa||[]).length;
      const pwProg=(cp.pw||[]).length;
      const ceProg=(cp.ce||[]).length;
      setSch(genSch(td(),blk,{pb:pbProg,pa:paProg,pw:pwProg,ce:ceProg}));
    }
  },[]);

  useEffect(()=>{
    if(!pomoOn)return;
    const t=setInterval(()=>{setPomoT(p=>{
      if(p<=1){setPomoOn(false);
        if(pomoM==='study'){setAlarm('ğŸ“š ì§‘ì¤‘ ì¢…ë£Œ! íœ´ì‹í•˜ì„¸ìš”.');setPomoM('break');return settings.pomoB*60}
        else{setAlarm('â° íœ´ì‹ ì¢…ë£Œ! ì‹œì‘!');setPomoM('study');return settings.pomoS*60}
      }return p-1;
    })},1000);return()=>clearInterval(t);
  },[pomoOn,pomoM]);

  useEffect(()=>{if(alarm){const t=setTimeout(()=>setAlarm(null),4000);return()=>clearTimeout(t)}},[alarm]);

  const addStudy=useCallback((sj,title,date=td())=>{
    const nr=SRI.map((days,i)=>({sj,title,date,rd:addD(date,days),rn:i+1,rl:SRL[i],dn:false,id:`${date}_${sj}_${i}_${Date.now()}`}));
    setRq(p=>[...p,...nr]);
  },[]);

  const tgDone=useCallback((date,idx)=>{setDone(p=>({...p,[`${date}_${idx}`]:!p[`${date}_${idx}`]}))},[]);
  const compRev=useCallback(id=>{setRq(p=>p.map(r=>r.id===id?{...r,dn:true}:r))},[]);
  const logT=useCallback((date,m,sj)=>{setLog(p=>({...p,[date]:{...(p[date]||{}),[sj]:((p[date]||{})[sj]||0)+m}}))},[]);

  const compLec=useCallback((ck,lid,title)=>{
    setCp(p=>{const a=p[ck]||[];if(a.includes(lid))return p;return{...p,[ck]:[...a,lid]}});
    addStudy(ck==='ce'?'control':'patent',title);
    setAlarm(`âœ… "${title}" ì™„ë£Œ! ë³µìŠµ ìŠ¤ì¼€ì¤„ ìƒì„±`);
  },[addStudy]);

  const regen=useCallback(()=>{
    const ix={pb:(cp.pb||[]).length,pa:(cp.pa||[]).length,pw:(cp.pw||[]).length,ce:(cp.ce||[]).length};
    setSch(genSch(td(),blk,ix));setAlarm('ğŸ“… ìŠ¤ì¼€ì¤„ ì¬ìƒì„± ì™„ë£Œ! (í˜„ì¬ ì§„ë„ ë°˜ì˜)');
  },[blk,cp]);
  const tgBlk=useCallback(d=>{setBlk(p=>p.includes(d)?p.filter(x=>x!==d):[...p,d])},[]);

  // Schedule item manipulation
  const moveItem=useCallback((date,fromIdx,toIdx)=>{
    setSch(p=>{
      const items=[...(p[date]||[])];
      if(fromIdx<0||fromIdx>=items.length||toIdx<0||toIdx>=items.length)return p;
      const[item]=items.splice(fromIdx,1);
      items.splice(toIdx,0,item);
      // Update times based on new positions
      const reTime=items.map((it,i)=>{
        if(i===0)return it;
        const prev=items[i-1];
        const pMin=parseInt(prev.time.split(':')[0])*60+parseInt(prev.time.split(':')[1])+prev.dur;
        const h=Math.floor(pMin/60),m=pMin%60;
        return{...it,time:`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`};
      });
      return{...p,[date]:reTime};
    });
  },[]);

  const deleteItem=useCallback((date,idx)=>{
    setSch(p=>{
      const items=[...(p[date]||[])];
      items.splice(idx,1);
      return{...p,[date]:items};
    });
  },[]);

  const handleMoveTap=useCallback((date,idx)=>{
    if(!moveSel){
      setMoveSel({date,idx});
    } else {
      if(moveSel.date===date&&moveSel.idx!==idx){
        moveItem(date,moveSel.idx,idx);
        setAlarm('âœ… ìŠ¤ì¼€ì¤„ ì´ë™ ì™„ë£Œ');
      }
      setMoveSel(null);
    }
  },[moveSel,moveItem]);

  const todayRev=useMemo(()=>rq.filter(r=>r.rd===td()&&!r.dn),[rq]);
  const overdueRev=useMemo(()=>rq.filter(r=>r.rd<td()&&!r.dn),[rq]);
  const todaySch=useMemo(()=>sch[sel]||[],[sch,sel]);
  const studyIt=useMemo(()=>todaySch.filter(i=>i.tp!=='rest'&&i.tp!=='exercise'),[todaySch]);
  const doneCount=useMemo(()=>{let c=0;todaySch.forEach((_,i)=>{if(done[`${sel}_${i}`])c++});return c},[todaySch,done,sel]);

  const pi=useMemo(()=>{
    const dd=gDD(),tot=diffD('2026-02-07',EXAM),el=tot-dd;
    const ph=gPh(td());
    const pct=Math.round(el/tot*100);
    let lb,co;
    if(ph===1){lb='1ë‹¨ê³„: ì´ë¡ ì™„ì„±+ë‹¨ê¶Œí™” (~3ì›”)';co='var(--blu)'}
    else if(ph===2){lb='2ë‹¨ê³„: ê¸°ì¶œ/GS+íšŒë… (4~6ì›”)';co='var(--ylw)'}
    else{lb='3ë‹¨ê³„: ì••ì¶•íšŒë…+ì‹œë®¬ (7ì›”)';co='var(--red)'}
    return{ph,lb,co,pct:Math.round(el/tot*100)};
  },[]);

  // DASHBOARD
  const renderDash=()=>{
    const dd=gDD();
    const ti=sch[td()]||[];
    const dc=ti.filter((_,i)=>done[`${td()}_${i}`]).length;
    const ts=ti.filter(i=>i.tp!=='rest'&&i.tp!=='exercise').length;
    const streak=(()=>{let s=0,d=td();while(log[d]){s++;d=addD(d,-1)}return s})();
    // Weekly patent hours
    const weekPatentMins=(()=>{let m=0;for(let i=0;i<7;i++){const d=addD(td(),-i);m+=((log[d]||{}).patent||0)}return m})();
    const weekPct=Math.min(Math.round(weekPatentMins/(23.3*60)*100),100);
    return <div className="fi">
      <div className="sg" style={{marginBottom:10}}>
        <div className="si"><div className="sv" style={{color:dd<=30?'var(--red)':'var(--ylw)'}}>D-{dd}</div><div className="sl">ì‹œí—˜ê¹Œì§€ (7.31)</div></div>
        <div className="si"><div className="sv" style={{color:'var(--grn)'}}>{dc}/{ts}</div><div className="sl">ì˜¤ëŠ˜ ì™„ë£Œ</div></div>
        <div className="si"><div className="sv" style={{color:'var(--ylw)'}}>{todayRev.length+overdueRev.length}</div><div className="sl">ë³µìŠµ ëŒ€ê¸°</div></div>
        <div className="si"><div className="sv" style={{color:'var(--blu)'}}>{streak}ì¼</div><div className="sl">ì—°ì† í•™ìŠµ</div></div>
      </div>

      {/* Weekly patent hours target */}
      <div className="c" style={{borderColor:weekPct>=100?'rgba(45,212,168,.3)':'rgba(240,192,64,.3)'}}>
        <div className="ct">ğŸ¯ ì£¼ê°„ íŠ¹í—ˆë²• ëª©í‘œ (23.3h)</div>
        <div style={{display:'flex',justifyContent:'space-between',fontSize:11,marginBottom:4}}>
          <span style={{color:weekPct>=100?'var(--grn)':'var(--ylw)',fontWeight:600}}>{fT(weekPatentMins)} / 23.3h</span>
          <span style={{fontFamily:'JetBrains Mono',fontSize:10,color:'var(--t3)'}}>{weekPct}%</span>
        </div>
        <div className="pb" style={{height:6}}><div className="pf" style={{width:`${weekPct}%`,background:weekPct>=100?'var(--grn)':'linear-gradient(90deg,var(--ylw),var(--acc))'}}></div></div>
      </div>

      {/* Application deadline alert */}
      {appDday()>0&&appDday()<=60&&<div className="c" style={{borderColor:'rgba(239,107,90,.3)',background:'rgba(239,107,90,.04)'}}>
        <div className="ct" style={{color:'var(--red)'}}>ğŸ“Œ ì›ì„œì ‘ìˆ˜ D-{appDday()}</div>
        <div style={{fontSize:11,color:'var(--t2)',lineHeight:1.5}}>
          <p>ğŸ“‹ ì ‘ìˆ˜: 2026.4.20(ì›”)~4.24(ê¸ˆ) 18:00</p>
          <p>ğŸ“„ ì„œë¥˜ì œì¶œ: ~17:00 (ê²½ë ¥ì¦ëª…ì„œ í•„ìˆ˜!)</p>
        </div>
      </div>}
      {td()>=APP_START&&td()<=APP_END&&<div className="c" style={{borderColor:'rgba(239,107,90,.5)',background:'rgba(239,107,90,.12)'}}>
        <div className="ct" style={{color:'var(--red)',fontSize:14}}>ğŸš¨ ì›ì„œì ‘ìˆ˜ ê¸°ê°„ì…ë‹ˆë‹¤!</div>
        <div style={{fontSize:12,color:'var(--t1)',lineHeight:1.6,fontWeight:500}}>
          <p>â° ì›ì„œì ‘ìˆ˜: ~4.24(ê¸ˆ) 18:00</p>
          <p>ğŸ“„ ì„œë¥˜ì œì¶œ: ~4.24(ê¸ˆ) 17:00</p>
          <p>âš ï¸ ê²½ë ¥ì¦ëª…ì„œ ë“± ë©´ì œì„œë¥˜ ì œì¶œ í•„ìˆ˜!</p>
        </div>
      </div>}

      {/* Exam schedule quick view */}
      <div className="c" style={{background:'rgba(124,108,240,.04)'}}>
        <div className="ct">ğŸ“‹ ì‹œí—˜ ì¼ì •</div>
        <div style={{display:'flex',gap:8}}>
          <div style={{flex:1,background:'var(--bg)',borderRadius:'var(--rs)',padding:8,textAlign:'center'}}>
            <div style={{fontSize:9,color:'var(--t3)'}}>1ì¼ì°¨ 7.31(ê¸ˆ)</div>
            <div style={{fontSize:12,fontWeight:600,color:'var(--acc2)',marginTop:2}}>íŠ¹í—ˆë²•</div>
            <div style={{fontSize:10,color:'var(--t2)'}}>09:30~11:30</div>
          </div>
          <div style={{flex:1,background:'var(--bg)',borderRadius:'var(--rs)',padding:8,textAlign:'center'}}>
            <div style={{fontSize:9,color:'var(--t3)'}}>2ì¼ì°¨ 8.1(í† )</div>
            <div style={{fontSize:12,fontWeight:600,color:'var(--cyn)',marginTop:2}}>ì œì–´ê³µí•™</div>
            <div style={{fontSize:10,color:'var(--t2)'}}>13:30~15:30</div>
          </div>
        </div>
      </div>

      <div className="c"><div className="ct">ğŸ¯ í•™ìŠµ ë‹¨ê³„</div>
        <div style={{display:'flex',justifyContent:'space-between',fontSize:11,marginBottom:4}}>
          <span style={{fontWeight:600,color:pi.co}}>{pi.lb}</span><span style={{color:'var(--t3)'}}>{pi.pct}%</span>
        </div>
        <div className="pb" style={{height:6}}><div className="pf" style={{width:`${pi.pct}%`,background:'linear-gradient(90deg,var(--blu),var(--ylw),var(--red))'}}></div></div>
        <div style={{display:'flex',justifyContent:'space-between',fontSize:9,color:'var(--t3)',marginTop:3}}><span>ë‹¨ê¶Œí™”(~3ì›”)</span><span>ê¸°ì¶œ/GS/íšŒë…(4~6ì›”)</span><span>ì••ì¶•(7ì›”)</span></div>
      </div>
      <div className="c"><div className="ct">ğŸ“š ê³¼ëª©ë³„ ì§„ë„</div>
        {CRS.map(c=>{const n=(cp[c.k]||[]).length;const pct=Math.round(n/c.tot*100);
          return <div key={c.k} style={{marginBottom:8}}>
            <div style={{display:'flex',justifyContent:'space-between',fontSize:11,marginBottom:3}}>
              <span>{c.ic} {c.nm}</span><span style={{fontFamily:'JetBrains Mono',fontSize:10,color:pct===100?'var(--grn)':'var(--t2)'}}>{n}/{c.tot} ({pct}%)</span>
            </div><div className="pb"><div className="pf" style={{width:`${pct}%`,background:`var(--${c.cl})`}}></div></div>
          </div>
        })}
      </div>
      <div className="c"><div className="ct">â±ï¸ ë½€ëª¨ë„ë¡œ</div>
        <div className="pomo">
          <div className="pomo-t" style={{color:pomoM==='study'?'var(--acc2)':'var(--grn)'}}>{String(Math.floor(pomoT/60)).padStart(2,'0')}:{String(pomoT%60).padStart(2,'0')}</div>
          <div className="pomo-l">{pomoM==='study'?'ğŸ“š ì§‘ì¤‘':'â˜• íœ´ì‹'}</div>
          <div className="pomo-c">
            <button className="b bp" onClick={()=>setPomoOn(!pomoOn)}>{pomoOn?'â¸':'â–¶'} {pomoOn?'ì¼ì‹œì •ì§€':'ì‹œì‘'}</button>
            <button className="b bs" onClick={()=>{setPomoOn(false);setPomoT(settings.pomoS*60);setPomoM('study')}}>â†º ë¦¬ì…‹</button>
          </div>
        </div>
      </div>
      {(todayRev.length+overdueRev.length)>0&&<div className="c" style={{borderColor:'rgba(240,192,64,.3)'}}>
        <div className="ct">ğŸ”” ë³µìŠµ ì•Œë¦¼</div>
        {overdueRev.slice(0,3).map(r=><div key={r.id} className="sb exam" style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>
          <div><div style={{fontWeight:500}}>{r.title}</div><div style={{fontSize:9,color:'var(--t3)'}}>âš ï¸ {r.rd}</div></div>
          <button className="b bsm bsuc" onClick={()=>compRev(r.id)}>âœ“</button>
        </div>)}
        {todayRev.slice(0,5).map(r=><div key={r.id} className="sb review" style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>
          <div><div style={{fontWeight:500}}>{r.title}</div><div style={{fontSize:9,color:'var(--t3)'}}>{r.rl}</div></div>
          <button className="b bsm bsuc" onClick={()=>compRev(r.id)}>âœ“</button>
        </div>)}
      </div>}
      <div className="c"><div className="ct">ğŸ“‹ ì˜¤ëŠ˜ì˜ ê³„íš</div>
        {ti.length===0?<p style={{color:'var(--t3)',fontSize:12}}>ìŠ¤ì¼€ì¤„ ì—†ìŒ</p>:
        ti.map((item,idx)=>{const id=done[`${td()}_${idx}`];
          return <label key={idx} className="chk"><input type="checkbox" checked={!!id} onChange={()=>{
            tgDone(td(),idx);if(!id&&item.sj&&item.dur){logT(td(),item.dur,item.sj);
              if(item.md==='input'&&item.lid)compLec(item.cr,item.lid,item.t.replace(/\[.*?\]\s*/,''))}
          }}/><span className="chk-b"></span>
            <span className="chk-t"><span style={{fontFamily:'JetBrains Mono',fontSize:10,color:'var(--t3)',marginRight:5}}>{item.time}</span>{item.t}
              <span className="badge" style={{marginLeft:3,background:'var(--bg)',color:'var(--t3)',fontSize:8}}>{item.dur}ë¶„</span>
              {item.md&&<span className="mb" style={{marginLeft:2,background:item.md==='input'?'var(--blu2)':'var(--pnk2)',color:item.md==='input'?'var(--blu)':'var(--pnk)'}}>{item.md==='input'?'ì…ë ¥':'ì¶œë ¥'}</span>}
            </span></label>
        })}
      </div>
      <div className="c"><div className="ct">âš¡ ë¹ ë¥¸ ì‹¤í–‰</div>
        <div style={{display:'flex',flexWrap:'wrap',gap:6}}>
          <button className="b bp" onClick={()=>setModal('add')}>+ ê³µë¶€ê¸°ë¡</button>
          <button className="b bs" onClick={()=>setModal('blk')}>ğŸš« íœ´ì¼</button>
          <button className="b bs" onClick={regen}>ğŸ”„ ì¬ìƒì„±</button>
          <button className="b bs" onClick={()=>setModal('man')}>âœï¸ ì¶”ê°€</button>
        </div>
      </div>
      <div className="c" style={{background:'linear-gradient(135deg,rgba(124,108,240,.06),rgba(64,216,208,.06))'}}><div style={{fontSize:12,color:'var(--t2)',lineHeight:1.6}}>{TIPS[new Date().getDate()%TIPS.length]}</div></div>
    </div>;
  };

  // DAILY
  const renderDaily=()=>{
    const items=sch[sel]||[];
    return <div className="fi">
      <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:10}}>
        <button className="b bs bsm" onClick={()=>{setSel(addD(sel,-1));setMoveSel(null)}}>â—€</button>
        <div style={{textAlign:'center'}}><div style={{fontSize:14,fontWeight:600}}>{sel} ({gdn(sel)})</div><div style={{fontSize:10,color:'var(--t3)'}}>{sel===td()?'ğŸ“Œ ì˜¤ëŠ˜':`D${diffD(td(),sel)>=0?'+':''}${diffD(td(),sel)}`}</div></div>
        <button className="b bs bsm" onClick={()=>{setSel(addD(sel,1));setMoveSel(null)}}>â–¶</button>
      </div>

      {blk.includes(sel)&&<div className="c" style={{background:'var(--red2)'}}><span style={{fontSize:12,color:'var(--red)',fontWeight:600}}>ğŸš« íœ´ì¼</span> <button className="b bsm bs" style={{marginLeft:8}} onClick={()=>tgBlk(sel)}>í•´ì œ</button></div>}

      {/* Edit mode toggle */}
      <div style={{display:'flex',gap:6,marginBottom:8}}>
        <button className={`b ${editMode?'bp':'bs'} bsm`} onClick={()=>{setEditMode(!editMode);setMoveSel(null)}}>
          {editMode?'âœ“ í¸ì§‘ì™„ë£Œ':'âœï¸ ìŠ¤ì¼€ì¤„ í¸ì§‘'}
        </button>
        {editMode&&<div style={{fontSize:10,color:'var(--t2)',display:'flex',alignItems:'center'}}>í•­ëª©ì„ íƒ­í•˜ì—¬ ì„ íƒ â†’ ì´ë™í•  ìœ„ì¹˜ íƒ­</div>}
      </div>

      {items.length===0?<div className="c"><p style={{color:'var(--t3)',fontSize:12}}>ìŠ¤ì¼€ì¤„ ì—†ìŒ</p></div>:
      items.map((item,idx)=>{
        const id=done[`${sel}_${idx}`];
        const isSel=moveSel&&moveSel.date===sel&&moveSel.idx===idx;

        if(editMode){
          return <div key={idx} style={{
            display:'flex',alignItems:'center',gap:4,marginBottom:3,
            background:isSel?'rgba(124,108,240,.15)':'transparent',
            borderRadius:'var(--rs)',padding:isSel?'2px 4px':'2px 4px',
            border:isSel?'1px solid var(--acc)':'1px solid transparent',
            transition:'.12s'
          }}>
            {/* Up/Down buttons */}
            <div style={{display:'flex',flexDirection:'column',gap:1,flexShrink:0}}>
              <button className="b bsm bs" style={{padding:'1px 5px',fontSize:9,opacity:idx===0?.3:1}} disabled={idx===0}
                onClick={()=>{moveItem(sel,idx,idx-1);setMoveSel(null)}}>â–²</button>
              <button className="b bsm bs" style={{padding:'1px 5px',fontSize:9,opacity:idx===items.length-1?.3:1}} disabled={idx===items.length-1}
                onClick={()=>{moveItem(sel,idx,idx+1);setMoveSel(null)}}>â–¼</button>
            </div>
            {/* Item (tap to select for move) */}
            <div className={`sb ${item.tp}`} style={{flex:1,margin:0,cursor:'grab',opacity:id?.5:1,
              boxShadow:isSel?'0 0 0 2px var(--acc)':'none'}}
              onClick={()=>handleMoveTap(sel,idx)}>
              <div style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>
                <span style={{fontWeight:500,fontSize:11}}>
                  <span style={{fontFamily:'JetBrains Mono',fontSize:9,color:'var(--t3)',marginRight:4}}>{item.time}</span>
                  {item.t}
                </span>
                <span style={{fontSize:9,opacity:.7}}>{item.dur}ë¶„</span>
              </div>
              {item.md&&<span style={{fontSize:9,opacity:.6}}>{item.md==='input'?'ğŸ“¥':'ğŸ“¤'}</span>}
            </div>
            {/* Delete */}
            <button className="b bsm bdg" style={{padding:'3px 6px',fontSize:10,flexShrink:0}}
              onClick={()=>{if(confirm('ì‚­ì œ?'))deleteItem(sel,idx)}}>âœ•</button>
          </div>;
        }

        // Normal mode
        return <div key={idx} className={`sb ${item.tp}`} style={{opacity:id?.5:1}}
          onClick={()=>{tgDone(sel,idx);if(!id&&item.sj&&item.dur){logT(sel,item.dur,item.sj);if(item.md==='input'&&item.lid)compLec(item.cr,item.lid,item.t.replace(/\[.*?\]\s*/,''))}}}>
          <div style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>
            <span style={{fontWeight:500,fontSize:11}}>
              <span style={{fontFamily:'JetBrains Mono',fontSize:9,color:'var(--t3)',marginRight:4}}>{item.time}</span>
              {id&&'âœ“ '}{item.t}
            </span>
            <span style={{fontSize:9,opacity:.7}}>{item.dur}ë¶„</span>
          </div>
          {item.md&&<span style={{fontSize:9,opacity:.6}}>{item.md==='input'?'ğŸ“¥ ì…ë ¥':'ğŸ“¤ ì¶œë ¥'}</span>}
        </div>;
      })}

      {/* Move indicator */}
      {moveSel&&moveSel.date===sel&&<div style={{padding:8,borderRadius:'var(--rs)',background:'rgba(124,108,240,.08)',border:'1px dashed var(--acc)',marginTop:4,fontSize:11,color:'var(--acc2)',textAlign:'center'}}>
        ğŸ“Œ "{items[moveSel.idx]?.t?.slice(0,20)}..." ì„ íƒë¨ â†’ ì´ë™í•  ìœ„ì¹˜ë¥¼ íƒ­í•˜ì„¸ìš”
        <button className="b bsm bs" style={{marginLeft:8}} onClick={()=>setMoveSel(null)}>ì·¨ì†Œ</button>
      </div>}

      <div className="c" style={{marginTop:10}}><div className="ct">ğŸ“ ë©”ëª¨</div>
        <textarea className="inp" rows={3} placeholder="í•™ìŠµ ë©”ëª¨..." value={notes[sel]||''} onChange={e=>setNotes(p=>({...p,[sel]:e.target.value}))} style={{resize:'vertical'}}/></div>
    </div>;
  };

  // WEEKLY
  const renderWeekly=()=>{
    const sw=(()=>{const d=new Date();d.setDate(d.getDate()-d.getDay()+wo*7);return fmt(d)})();
    const wd=Array.from({length:7},(_,i)=>addD(sw,i));
    return <div className="fi">
      <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:10}}>
        <button className="b bs bsm" onClick={()=>setWo(w=>w-1)}>â—€</button>
        <div style={{fontSize:13,fontWeight:600}}>{wd[0].slice(5)} ~ {wd[6].slice(5)}</div>
        <button className="b bs bsm" onClick={()=>setWo(w=>w+1)}>â–¶</button>
      </div>
      <div style={{display:'grid',gridTemplateColumns:'repeat(7,1fr)',gap:3}}>
        {wd.map(d=>{const items=sch[d]||[];const st=items.filter(i=>i.tp!=='rest'&&i.tp!=='exercise');const dc=st.filter((_,i)=>{const gi=items.indexOf(st[i]);return done[`${d}_${gi}`]}).length;const isB=blk.includes(d);const isT=d===td();
          return <div key={d} style={{background:isT?'rgba(124,108,240,.08)':'var(--bg)',border:`1px solid ${isT?'var(--acc)':'var(--bdr)'}`,borderRadius:'var(--rs)',padding:5,cursor:'pointer',minHeight:110}} onClick={()=>{setSel(d);setTab('daily')}}>
            <div style={{fontSize:10,fontWeight:isT?700:500,color:isT?'var(--acc2)':'var(--t2)',textAlign:'center',marginBottom:3}}>{gdn(d)} {d.slice(8)}</div>
            {isB?<div style={{fontSize:9,color:'var(--red)',textAlign:'center'}}>ğŸš«</div>:
            <div style={{fontSize:8}}>{st.slice(0,4).map((item,i)=><div key={i} style={{padding:'1px 2px',borderRadius:2,marginBottom:1,background:'rgba(124,108,240,.06)',color:'var(--t2)',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'}}>{item.t.replace(/\[.*?\]\s*/,'').slice(0,9)}</div>)}
              <div style={{textAlign:'center',marginTop:2,fontSize:9,color:dc===st.length&&st.length>0?'var(--grn)':'var(--t3)'}}>{dc}/{st.length}</div>
            </div>}
          </div>})}
      </div>
    </div>;
  };

  // MONTHLY
  const renderMonthly=()=>{
    const{y,m}=cm;const fd=new Date(y,m,1).getDay();const dim=new Date(y,m+1,0).getDate();
    const days=[];for(let i=0;i<fd;i++)days.push(null);for(let i=1;i<=dim;i++)days.push(i);
    const ms=`${y}-${String(m+1).padStart(2,'0')}`;
    return <div className="fi">
      <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:10}}>
        <button className="b bs bsm" onClick={()=>setCm(p=>{const d=new Date(p.y,p.m-1);return{y:d.getFullYear(),m:d.getMonth()}})}>â—€</button>
        <div style={{fontSize:15,fontWeight:700}}>{y}ë…„ {m+1}ì›”</div>
        <button className="b bs bsm" onClick={()=>setCm(p=>{const d=new Date(p.y,p.m+1);return{y:d.getFullYear(),m:d.getMonth()}})}>â–¶</button>
      </div>
      <div className="cg">
        {['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '].map(d=><div key={d} className="ch">{d}</div>)}
        {days.map((day,idx)=>{if(!day)return <div key={idx} className="cd empty"></div>;
          const ds=`${ms}-${String(day).padStart(2,'0')}`;const isT=ds===td(),isS=ds===sel,isB=blk.includes(ds);
          const di=sch[ds]||[];
          return <div key={idx} className={`cd${isT?' today':''}${isS?' sel':''}${isB?' blk':''}`} onClick={()=>{setSel(ds);setTab('daily')}}>
            <span style={{fontSize:10,fontWeight:isT?700:400}}>{day}</span>
            <div className="cdots">
              {di.some(i=>i.sj==='patent')&&<div className="cdot" style={{background:'var(--patent)'}}></div>}
              {di.some(i=>i.sj==='control')&&<div className="cdot" style={{background:'var(--control)'}}></div>}
              {di.some(i=>i.tp==='exam')&&<div className="cdot" style={{background:'var(--exam)'}}></div>}
              {rq.some(r=>r.rd===ds&&!r.dn)&&<div className="cdot" style={{background:'var(--review)'}}></div>}
            </div>
          </div>})}
      </div>
      <div className="c" style={{marginTop:10}}><div style={{display:'flex',flexWrap:'wrap',gap:10,fontSize:10}}>
        {[['patent','íŠ¹í—ˆë²•'],['control','ì œì–´ê³µí•™'],['exam','ê¸°ì¶œ'],['review','ë³µìŠµ']].map(([k,l])=>
          <span key={k} style={{display:'flex',alignItems:'center',gap:3}}><div className="cdot" style={{background:`var(--${k})`,width:6,height:6}}></div>{l}</span>)}
      </div></div>
    </div>;
  };

  // COURSES
  const renderCourses=()=><div className="fi">
    {CRS.map(c=>{const completed=cp[c.k]||[];const pct=Math.round(completed.length/c.tot*100);const isO=exp[c.k];
      return <div key={c.k} className="c">
        <div className="exp-h" onClick={()=>setExp(p=>({...p,[c.k]:!p[c.k]}))}>
          <div style={{display:'flex',alignItems:'center',gap:6}}>
            <span>{c.ic}</span><span style={{fontSize:13,fontWeight:600}}>{c.nm}</span>
            <span className="badge" style={{background:`rgba(124,108,240,.1)`,color:`var(--${c.cl})`}}>{completed.length}/{c.tot}</span>
          </div>
          <span className={`exp-arr${isO?' open':''}`}>â–¶</span>
        </div>
        <div className="pb" style={{marginBottom:isO?8:0}}><div className="pf" style={{width:`${pct}%`,background:`var(--${c.cl})`}}></div></div>
        {isO&&<div style={{maxHeight:350,overflowY:'auto'}}>
          {c.lc.map(l=>{const id=completed.includes(l.id);
            return <div key={l.id} className="cpi">
              <span className="num">{String(l.n).padStart(2,'0')}</span>
              <span className="ttl">{l.t}{l.s&&<span style={{display:'block',fontSize:9,color:'var(--t3)',marginTop:1}}>{l.s}</span>}{l.p&&<span className="mb" style={{background:'var(--bg4)',color:'var(--t3)',marginLeft:3}}>{l.p}</span>}</span>
              {id?<span className="done">âœ“</span>:<button className="b bsm bp" onClick={()=>compLec(c.k,l.id,`${c.sh} ${l.n}ê°•: ${l.t}`)}>ì™„ë£Œ</button>}
            </div>})}
        </div>}
      </div>})}
  </div>;

  // REVIEW
  const renderReview=()=>{
    const up=rq.filter(r=>!r.dn&&r.rd>=td()).sort((a,b)=>a.rd.localeCompare(b.rd));
    return <div className="fi">
      {overdueRev.length>0&&<div className="c" style={{borderColor:'rgba(239,107,90,.3)'}}>
        <div className="ct" style={{color:'var(--red)'}}>âš ï¸ ë°€ë¦° ë³µìŠµ ({overdueRev.length})</div>
        {overdueRev.slice(0,10).map(r=><div key={r.id} className="sb exam" style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>
          <div><div style={{fontWeight:500,fontSize:11}}>{r.title}</div><div style={{fontSize:9,color:'var(--t3)'}}>{r.rd} | {r.rl}</div></div>
          <button className="b bsm bsuc" onClick={()=>compRev(r.id)}>âœ“</button>
        </div>)}
      </div>}
      <div className="c"><div className="ct">ğŸ“… ì˜¤ëŠ˜ ë³µìŠµ ({todayRev.length})</div>
        {todayRev.length===0?<p style={{color:'var(--t3)',fontSize:11}}>ì—†ìŒ ğŸ‰</p>:
        todayRev.map(r=><div key={r.id} className="sb review" style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>
          <div><div style={{fontWeight:500,fontSize:11}}>{r.title}</div><div style={{fontSize:9,color:'var(--t3)'}}>{r.rl}</div></div>
          <button className="b bsm bsuc" onClick={()=>compRev(r.id)}>âœ“</button>
        </div>)}
      </div>
      <div className="c"><div className="ct">ğŸ“‹ ì˜ˆì • (20ê±´)</div>
        {up.slice(0,20).map(r=><div key={r.id} style={{padding:'3px 8px',borderRadius:4,marginBottom:2,background:'var(--bg)',fontSize:10,display:'flex',justifyContent:'space-between'}}>
          <span><span style={{color:'var(--t3)',fontFamily:'JetBrains Mono',marginRight:5}}>{r.rd}</span>{r.title}</span>
          <span className="badge" style={{background:'var(--ylw2)',color:'var(--ylw)'}}>{r.rl}</span>
        </div>)}
      </div>
    </div>;
  };

  // STATS
  const renderStats=()=>{
    const le=Object.entries(log);const last7=Array.from({length:7},(_,i)=>addD(td(),-6+i));
    const streak=(()=>{let s=0,d=td();while(log[d]){s++;d=addD(d,-1)}return s})();
    const totM=(()=>{let t=0;Object.values(log).forEach(d=>Object.values(d).forEach(m=>t+=m));return t})();
    return <div className="fi">
      <div className="sg" style={{marginBottom:10}}>
        <div className="si"><div className="sv" style={{color:'var(--acc2)'}}>{le.length}</div><div className="sl">í•™ìŠµì¼</div></div>
        <div className="si"><div className="sv" style={{color:'var(--grn)'}}>{fT(totM)}</div><div className="sl">ì´ ì‹œê°„</div></div>
        <div className="si"><div className="sv" style={{color:'var(--ylw)'}}>{streak}</div><div className="sl">ì—°ì†ì¼</div></div>
        <div className="si"><div className="sv" style={{color:'var(--blu)'}}>{rq.filter(r=>r.dn).length}</div><div className="sl">ë³µìŠµì™„ë£Œ</div></div>
      </div>
      <div className="c"><div className="ct">ğŸ“ˆ ìµœê·¼ 7ì¼</div>
        <div style={{display:'flex',alignItems:'flex-end',gap:3,height:100,padding:'6px 0'}}>
          {last7.map(d=>{const dl=log[d]||{};const pm=dl.patent||0,cm2=dl.control||0,tot=pm+cm2;
            return <div key={d} style={{flex:1,display:'flex',flexDirection:'column',alignItems:'center',gap:3}}>
              <div style={{fontSize:8,color:'var(--t3)',fontFamily:'JetBrains Mono'}}>{tot>0?`${Math.round(tot/60)}h`:'-'}</div>
              <div style={{width:'100%'}}><div style={{height:`${Math.min(pm/500*80,80)}px`,background:'var(--patent)',borderRadius:'2px 2px 0 0',minHeight:pm>0?2:0}}></div>
                <div style={{height:`${Math.min(cm2/500*80,80)}px`,background:'var(--control)',borderRadius:'0 0 2px 2px',minHeight:cm2>0?2:0}}></div></div>
              <div style={{fontSize:8,color:d===td()?'var(--acc2)':'var(--t3)'}}>{gdn(d)}</div>
            </div>})}
        </div>
      </div>
      <div className="c"><div className="ct">ğŸ’¾ ë°ì´í„°</div>
        <div style={{display:'flex',gap:6,flexWrap:'wrap'}}>
          <button className="b bs" onClick={()=>{const data={sch,log,rq,blk,done,notes,cp,settings,dt:new Date().toISOString()};const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`study_${td()}.json`;a.click();URL.revokeObjectURL(url)}}>ğŸ“¥ ë‚´ë³´ë‚´ê¸°</button>
          <button className="b bs" onClick={()=>{const input=document.createElement('input');input.type='file';input.accept='.json';input.onchange=e=>{const f=e.target.files[0];const r=new FileReader();r.onload=ev=>{try{const d=JSON.parse(ev.target.result);if(d.sch)setSch(d.sch);if(d.log)setLog(d.log);if(d.rq)setRq(d.rq);if(d.blk)setBlk(d.blk);if(d.done)setDone(d.done);if(d.notes)setNotes(d.notes);if(d.cp)setCp(d.cp);if(d.settings)setSettings(d.settings);setAlarm('âœ… ë³µì›!')}catch{setAlarm('âŒ ì˜¤ë¥˜')}};r.readAsText(f)};input.click()}}>ğŸ“¤ ê°€ì ¸ì˜¤ê¸°</button>
          <button className="b bdg" onClick={()=>{if(confirm('ì „ì²´ ì´ˆê¸°í™”?')){localStorage.clear();location.reload()}}}>ğŸ—‘ ì´ˆê¸°í™”</button>
        </div>
      </div>
    </div>;
  };

  // SETTINGS
  const renderSet=()=><div className="fi">
    <div className="c"><div className="ct">âš™ï¸ ì„¤ì •</div>
      <div style={{display:'grid',gap:10}}>
        <div><label className="lbl">ë½€ëª¨ë„ë¡œ ì§‘ì¤‘(ë¶„)</label><input className="inp" type="number" value={settings.pomoS} onChange={e=>setSettings(s=>({...s,pomoS:+e.target.value||50}))}/></div>
        <div><label className="lbl">ë½€ëª¨ë„ë¡œ íœ´ì‹(ë¶„)</label><input className="inp" type="number" value={settings.pomoB} onChange={e=>setSettings(s=>({...s,pomoB:+e.target.value||10}))}/></div>
      </div>
    </div>
    <div className="c"><div className="ct">ğŸš« íœ´ì¼ ê´€ë¦¬</div>
      <div style={{display:'flex',gap:6,marginBottom:8}}><input className="inp" type="date" id="blkI" style={{flex:1}}/><button className="b bp" onClick={()=>{const v=document.getElementById('blkI').value;if(v)tgBlk(v)}}>ë“±ë¡</button></div>
      {blk.sort().map(d=><div key={d} style={{display:'flex',justifyContent:'space-between',padding:'3px 8px',borderRadius:4,marginBottom:2,background:'var(--red2)',fontSize:11}}><span>{d} ({gdn(d)})</span><span style={{cursor:'pointer',color:'var(--red)'}} onClick={()=>tgBlk(d)}>âœ•</span></div>)}
      {blk.length>0&&<button className="b bp" style={{marginTop:6}} onClick={regen}>ğŸ”„ ì¬ìƒì„±</button>}
    </div>
    <div className="c"><div className="ct">ğŸ“– ìˆ˜í—˜ ì „ëµ (ê³ ë“ì  ë¡œë“œë§µ)</div>
      <div style={{fontSize:11,color:'var(--t2)',lineHeight:1.7}}>
        <p><b style={{color:'var(--red)'}}>ğŸ“Œ í•µì‹¬ ì¼ì •</b></p>
        <p>â€¢ ì›ì„œì ‘ìˆ˜: 2026.4.20(ì›”)~4.24(ê¸ˆ) âš ï¸ê²½ë ¥ì¦ëª…ì„œ ì œì¶œ í•„ìˆ˜</p>
        <p>â€¢ 1ì¼ì°¨ 7.31(ê¸ˆ): íŠ¹í—ˆë²• 09:30~11:30</p>
        <p>â€¢ 2ì¼ì°¨ 8.1(í† ): ì œì–´ê³µí•™ 13:30~15:30</p>
        <p>â€¢ í•©ê²©: íŠ¹í—ˆë²• 60ì â†‘, ì œì–´ê³µí•™ 50ì â†‘(P/F)</p>
        <p style={{marginTop:6}}><b style={{color:'var(--acc2)'}}>3ë‹¨ê³„ ë¡œë“œë§µ:</b></p>
        <p>â€¢ 1ë‹¨ê³„(~3ì›”): ê¸°ë³¸ì´ë¡  30ê°• ì™„ê°• + ë‹¨ê¶Œí™” 1ì°¨ ì™„ì„± + ë²•ì „í›ˆë ¨</p>
        <p>â€¢ 2ë‹¨ê³„(4~6ì›”): ê¸°ì¶œ/GS í’€ì´ + íšŒë…(3ì¼ ìˆœí™˜: ê¸°ì¶œâ†’íŒë¡€+ë‹µì‘â†’íšŒë…)</p>
        <p>â€¢ 3ë‹¨ê³„(7ì›”): ì••ì¶•íšŒë…(8-4-2-1) + ì‹¤ì „ ì‹œë®¬ë ˆì´ì…˜</p>
        <p style={{marginTop:6}}><b style={{color:'var(--ylw)'}}>ì£¼ê°„ ëª©í‘œ: íŠ¹í—ˆë²• 23.3ì‹œê°„+</b></p>
        <p style={{marginTop:6}}><b style={{color:'var(--grn)'}}>ë‹µì•ˆì‘ì„± í…Œí¬ë‹‰:</b></p>
        <p>â€¢ ëª©ì°¨ëŠ” 'ë…¼ì 'ìœ¼ë¡œ ê°„ê²°í•˜ê²Œ (2~3ì¤„)</p>
        <p>â€¢ íŒë¡€ í‚¤ì›Œë“œ 'ì‘ì€ë”°ì˜´í‘œ' ê°•ì¡°</p>
        <p>â€¢ ê²€í† /í•™ì„¤: 2ì¤„ ì´ë‚´ ë°©ì–´ì  ì‘ì„±</p>
        <p>â€¢ ì‚¬ì•ˆí¬ì„­: â‘ â‘¡ì›ë¬¸ì+ì¤„ë°”ê¿ˆ (ìµœê³ ë°°ì )</p>
        <p>â€¢ ë‹µì•ˆ ìµœì†Œ 16ìª½ ì´ìƒ ì‘ì„±</p>
        <p style={{marginTop:6}}><b style={{color:'var(--cyn)'}}>ì œì–´ê³µí•™ (ê³¼ë½ë°©ì§€):</b></p>
        <p>â€¢ ì¸ê°• 20ê°• + ê¸°ì¶œ ìœ í˜• ë°˜ë³µìˆ™ë‹¬</p>
        <p>â€¢ ê³„ì‚°ê¸° ë³µì†Œìˆ˜Â·í–‰ë ¬ ì—°ì‚° ìˆ™ë‹¬</p>
        <p style={{marginTop:6}}><b style={{color:'var(--pnk)'}}>ì‹¤ì „ ì¤€ë¹„:</b></p>
        <p>â€¢ GS: ìµœì†Œ 2ëª… ê°•ì‚¬ ìˆ˜ê°• (32ë…¼ì , ë¶ˆì˜íƒ€ ëŒ€ë¹„)</p>
        <p>â€¢ í•„ê¸°êµ¬: ì œíŠ¸ìŠ¤íŠ¸ë¦¼ 0.7mm ë“± í™•ì •, í•„ì† ì ê²€</p>
        <p>â€¢ ì‹œë®¬: ì¢ì€ ì±…ìƒ+ë²•ì „+ë¬¸ì œì§€+ë‹µì•ˆì§€+ìŠ¤í†±ì›Œì¹˜</p>
        <p>â€¢ ë³´ë¡ : ë¯¸êµ­íŒë¡€Â·ì†Œìˆ˜ì„¤ë¡œ 1~2ì  ì¶”ê°€ ë“ì </p>
      </div>
    </div>
    <div className="c"><div className="ct">ğŸ“± ë°°í¬</div>
      <div style={{fontSize:11,color:'var(--t2)',lineHeight:1.7}}>
        <p>1. GitHubì— index.html ì—…ë¡œë“œ â†’ Settings â†’ Pages</p>
        <p>2. ëª¨ë°”ì¼: "í™ˆ í™”ë©´ì— ì¶”ê°€"ë¡œ ì•± ì‚¬ìš©</p>
        <p>3. ê¸°ê¸° ë™ê¸°í™”: ë‚´ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸° í™œìš©</p>
      </div>
    </div>
  </div>;

  // MODALS
  const renderModal=()=>{
    if(!modal)return null;const cl=()=>setModal(null);
    if(modal==='add')return <div className="mo" onClick={cl}><div className="md" onClick={e=>e.stopPropagation()}>
      <div className="mt">ğŸ“š ê³µë¶€ ê¸°ë¡</div><div style={{display:'grid',gap:10}}>
        <div><label className="lbl">ê°•ì˜ ì„ íƒ</label><select className="inp" id="as_l"><option value="">ì§ì ‘ ì…ë ¥</option>
          {CRS.flatMap(c=>c.lc.map(l=><option key={l.id} value={`${c.k}|${l.id}|${c.sh} ${l.n}ê°•: ${l.t}`}>{c.sh} {l.n}ê°•: {l.t}</option>))}</select></div>
        <div><label className="lbl">ì§ì ‘ ì…ë ¥</label><input className="inp" id="as_t" placeholder="í•™ìŠµ ë‚´ìš©"/></div>
        <div><label className="lbl">ì‹œê°„(ë¶„)</label><input className="inp" type="number" id="as_d" defaultValue={60}/></div>
        <div><label className="lbl">ë‚ ì§œ</label><input className="inp" type="date" id="as_dt" defaultValue={td()}/></div>
        <div style={{display:'flex',gap:6}}>
          <button className="b bp" style={{flex:1}} onClick={()=>{
            const lv=document.getElementById('as_l').value;const dur=+document.getElementById('as_d').value;const date=document.getElementById('as_dt').value;
            let title=document.getElementById('as_t').value;
            if(lv){const[ck,lid,lt]=lv.split('|');compLec(ck,lid,lt);title=lt}
            else if(title){addStudy('patent',title,date)}
            if(title||lv){logT(date,dur,'patent');setAlarm('âœ… ê¸°ë¡ ì™„ë£Œ!');cl()}
          }}>ì €ì¥</button><button className="b bs" onClick={cl}>ì·¨ì†Œ</button>
        </div>
      </div></div></div>;

    if(modal==='blk')return <div className="mo" onClick={cl}><div className="md" onClick={e=>e.stopPropagation()}>
      <div className="mt">ğŸš« íœ´ì¼ ë“±ë¡</div><div style={{display:'grid',gap:10}}>
        <div><label className="lbl">ì‹œì‘ì¼</label><input className="inp" type="date" id="ab_s" defaultValue={td()}/></div>
        <div><label className="lbl">ì¢…ë£Œì¼</label><input className="inp" type="date" id="ab_e"/></div>
        <div style={{display:'flex',gap:6}}>
          <button className="b bp" style={{flex:1}} onClick={()=>{
            const s=document.getElementById('ab_s').value,e=document.getElementById('ab_e').value||s;
            let d=s;while(d<=e){if(!blk.includes(d))tgBlk(d);d=addD(d,1)}
            setAlarm('ğŸš« ë“±ë¡ ì™„ë£Œ!');cl();
          }}>ë“±ë¡</button><button className="b bs" onClick={cl}>ì·¨ì†Œ</button>
        </div>
      </div></div></div>;

    if(modal==='man')return <div className="mo" onClick={cl}><div className="md" onClick={e=>e.stopPropagation()}>
      <div className="mt">âœï¸ ìŠ¤ì¼€ì¤„ ì¶”ê°€</div><div style={{display:'grid',gap:10}}>
        <div><label className="lbl">ë‚ ì§œ</label><input className="inp" type="date" id="m_d" defaultValue={sel}/></div>
        <div><label className="lbl">ì‹œê°„</label><input className="inp" type="time" id="m_t" defaultValue="09:00"/></div>
        <div><label className="lbl">ìœ í˜•</label><select className="inp" id="m_tp"><option value="patent">íŠ¹í—ˆë²•</option><option value="control">ì œì–´ê³µí•™</option><option value="exam">ê¸°ì¶œ</option><option value="review">ë³µìŠµ</option><option value="rest">íœ´ì‹</option><option value="exercise">ìš´ë™</option></select></div>
        <div><label className="lbl">ë‚´ìš©</label><input className="inp" id="m_ti" placeholder="ë‚´ìš©"/></div>
        <div><label className="lbl">ì‹œê°„(ë¶„)</label><input className="inp" type="number" id="m_du" defaultValue={60}/></div>
        <div><label className="lbl">ëª¨ë“œ</label><select className="inp" id="m_mo"><option value="input">ì…ë ¥</option><option value="output">ì¶œë ¥</option></select></div>
        <div style={{display:'flex',gap:6}}>
          <button className="b bp" style={{flex:1}} onClick={()=>{
            const date=document.getElementById('m_d').value;
            const it={time:document.getElementById('m_t').value,dur:+document.getElementById('m_du').value,tp:document.getElementById('m_tp').value,t:document.getElementById('m_ti').value,md:document.getElementById('m_mo').value,sj:['patent','control'].includes(document.getElementById('m_tp').value)?document.getElementById('m_tp').value:undefined};
            if(it.t){setSch(p=>({...p,[date]:[...(p[date]||[]),it].sort((a,b)=>a.time.localeCompare(b.time))}));setAlarm('âœ… ì¶”ê°€!');cl()}
          }}>ì¶”ê°€</button><button className="b bs" onClick={cl}>ì·¨ì†Œ</button>
        </div>
      </div></div></div>;
    return null;
  };

  const tabs2=[{id:'dash',l:'í™ˆ',i:'ğŸ '},{id:'daily',l:'ì¼ë³„',i:'ğŸ“…'},{id:'weekly',l:'ì£¼ë³„',i:'ğŸ“Š'},{id:'monthly',l:'ì›”ë³„',i:'ğŸ—“'},{id:'courses',l:'ê³¼ëª©',i:'ğŸ“š'},{id:'review',l:'ë³µìŠµ',i:'ğŸ””'},{id:'stats',l:'í†µê³„',i:'ğŸ“ˆ'},{id:'set',l:'ì„¤ì •',i:'âš™ï¸'}];

  return <div className="app">
    {alarm&&<div className="alarm" onClick={()=>setAlarm(null)}>{alarm}</div>}
    <header className="hdr"><div className="hdr-top">
      <div className="logo"><div className="logo-i">ë³€</div><div><h1>ë³€ë¦¬ì‚¬ í•™ìŠµ í”Œë˜ë„ˆ</h1><small>íŠ¹í—ˆë²•(ê³ ë“ì ) Â· ì œì–´ê³µí•™(P/F) Â· 7.31 ì‹œí—˜</small></div></div>
      <div className="hdr-r">
        {(todayRev.length+overdueRev.length)>0&&<div className="bell" onClick={()=>setTab('review')}>ğŸ””<div className="bell-n">{todayRev.length+overdueRev.length}</div></div>}
        <div className="dday-badge">D-{gDD()} (7.31)</div>
      </div>
    </div></header>
    <nav className="tabs">{tabs2.map(t=><button key={t.id} className={`tab${tab===t.id?' on':''}`} onClick={()=>{setTab(t.id);setEditMode(false);setMoveSel(null)}}>{t.i} {t.l}</button>)}</nav>
    <main className="content">
      {tab==='dash'&&renderDash()}{tab==='daily'&&renderDaily()}{tab==='weekly'&&renderWeekly()}{tab==='monthly'&&renderMonthly()}{tab==='courses'&&renderCourses()}{tab==='review'&&renderReview()}{tab==='stats'&&renderStats()}{tab==='set'&&renderSet()}
    </main>
    {renderModal()}
  </div>;
}
ReactDOM.render(<App/>,document.getElementById('root'));
</script>
</body>
</html>
